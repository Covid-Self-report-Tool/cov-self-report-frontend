{"version":3,"sources":["config/index.ts","config/firebase.ts","config/map.ts","components/ticker-cards/LegendSymbol.tsx","components/ticker-cards/LegendSymbolBar.tsx","components/ticker-cards/SetCountriesSymb.tsx","utils/index.ts","components/ticker-cards/TickerCards.tsx","utils/dates.ts","components/ticker-cards/TickerInfoPopover.tsx","components/ticker-cards/ToggleLayer.tsx","utils/map.ts","components/map/Map.tsx","components/map/MapboxTileLayer.tsx","components/map/MapboxWordmark.tsx","components/map/PolygonTooltip.tsx","components/map/Polygons.tsx","components/map/SubmittedCases.tsx","views/Home.tsx","views/About.tsx","views/Models.tsx","utils/firebase.ts","context/UserContext.tsx","context/GlobalContext.tsx","components/signup/AcctReqExplain.tsx","components/signup/AgreeToTerms.tsx","components/signup/EmailSignupFields.tsx","components/signup/SignInLink.tsx","components/signup/SignupForm.tsx","components/signup/SignupLoginBtns.tsx","components/LoginForm.tsx","views/LoginSignup.tsx","views/CountryList.tsx","views/SecretSnackground.tsx","utils/api.ts","utils/queries.ts","components/AboutSection.tsx","components/BackToTopBtn.tsx","components/CountryTable.tsx","components/top-bar/Burger.tsx","components/top-bar/LoginSignupBtn.tsx","components/top-bar/MySymptomsBtn.tsx","components/top-bar/TitleWrap.tsx","components/top-bar/TopBar.tsx","components/top-bar/UserPopoverMenu.tsx","components/dashboard.styles.ts","components/Dashboard.tsx","components/MobileOffCanvasNav.tsx","components/ShareButtons.tsx","components/SharingPopoutMenu.tsx","components/SimpleModal.tsx","components/SiteNavBtns.tsx","components/Snackbar.tsx","context/types.ts","components/SplashScreen.tsx","components/Disclaimer.tsx","components/SuccessConfModal.tsx","components/UnsupportedBrowserMsg.tsx","components/VerifyEmailForm.tsx","utils/strings.ts","components/submission/steps/SymptomStep.tsx","components/submission/steps/TestingStep.tsx","components/submission/steps/LocationDetailsStep.tsx","components/submission/steps/RegistrationStep.tsx","components/submission/Modal.tsx","theme.ts","Routes.tsx","index.tsx"],"names":["BACKEND_URL","process","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","REACT_APP_FIREBASE_STORAGE_PROJECT","messagingSenderId","appId","measurementId","firebase","SELF_REPORTED_STYLES","countriesSymbology","total_confirmed","palette","ranges","total_deaths","total_recovered","tickersConfig","selfReported","defText","heading","omitLastUpdated","symbol","alwaysShow","borderWidth","borderColor","fillColor","isCircular","colorStops","recovered","globalStateKey","confirmed","deaths","LegendSymbol","size","state","useContext","GlobalContext","Box","width","height","display","activeCountrySymbKey","marginRight","alignItems","border","borderRadius","bgcolor","useStyles","makeStyles","theme","barLabels","fontSize","justifyContent","color","background","default","lineHeight","marginTop","tickerFooterLink","info","main","LegendSymbolBar","classes","active","style","backgroundImage","join","className","SetCountriesSymb","dispatch","Link","href","onClick","event","preventDefault","type","payload","prettyPrint","value","undefined","toLocaleString","navigator","language","minimumFractionDigits","isValidUserAgent","USER_AGENT","userAgent","indexOf","root","textAlign","paper","backgroundColor","common","white","flexDirection","overflow","padding","spacing","position","breakpoints","up","marginBottom","tickerVal","black","tickerCardsWrap","zIndex","down","bottom","gridColumnGap","gridRowGap","gridTemplateColumns","right","top","CardTitle","renderLegendSymbol","Typography","component","variant","NotifierCard","props","number","renderTitle","renderPopover","renderSymbolBar","Grid","item","Paper","CircularProgress","minHeight","TickerCards","data","config","Object","keys","map","key","length","footerLinkClassName","visibilityKey","prettyDate","date","timezoneDate","Date","getTime","getTimezoneOffset","toLocaleDateString","toLocaleTimeString","popover","definitionText","whiteSpace","infoBtn","viewInfoLink","TickerInfoPopover","React","useState","anchorEl","setAnchorEl","useQuery","getCountryGeoJSONData","staleTime","lastUpdated","status","properties","handleClose","IconButton","aria-controls","aria-haspopup","currentTarget","Popover","id","open","Boolean","onClose","anchorOrigin","vertical","horizontal","subheader","ListSubheader","ListItem","divider","RouteLink","to","ToggleLayer","layerVisibility","indivMarkerDiameter","createClusterCustomIcon","cluster","diameter","getChildCount","L","divIcon","iconSize","point","indivMarkerIcon","setSymbology","srcFeats","features","legend","precision","field","arrValsForSymb","filter","serie","GeoStats","min","Math","max","setClassManually","setPrecision","setColors","feature","gray","valueToUse","classValue","getClass","chroma","require","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","theMapItself","left","Map","submittedFeats","styles","useTheme","smallToMid","useMediaQuery","midsizeAndUp","huge","polySymb","center","lat","lng","zoom","zoomControl","tilesetId","countries","FeatureGroup","ZoomControl","MapboxTileLayer","url","TileLayer","attribution","tileSize","zoomOffset","MapboxWordmark","target","backgroundPosition","backgroundRepeat","backgroundSize","textIndent","PolygonTooltip","Tooltip","opacity","country_name","margin","paddingLeft","listStyleType","new_confirmed","new_deaths","new_recovered","NAME_LONG","Polygons","i","geometry","levelsDeep","positions","NonReactGeoJSON","coordsToLatLngs","coordinates","fill","fillOpacity","stroke","weight","Polygon","SubmittedCases","getSubmittedCases","submittedData","submissions","showCoverageOnHover","iconCreateFunction","disableClusteringAtZoom","spiderfyOnMaxZoom","maxClusterRadius","selfReportedItem","Marker","icon","Popup","maxWidth","address","Home","initial","totalConfirmed","totalDeaths","totalRecovered","useSubmitted","useCountryTotals","countryTotals","countryTotalsStatus","useAuthState","auth","user","loading","reduce","sums","thisOne","useEffect","hasSeenSplash","mainAboutPages","htmlPages","About","text","page","filename","TermsOfService","PrivacyPolicy","Models","signUp","email","password","captcha","a","app","createUserWithEmailAndPassword","logOut","history","userDispatch","globalDispatch","signOut","push","message","severity","login","signInWithEmailAndPassword","googleLogin","googleAuthProvider","GoogleAuthProvider","signInWithPopup","facebookLogin","facebookAuthProvider","FacebookAuthProvider","initialUserState","symptoms","fever","isPresent","startDate","endDate","headache","shortnessOfBreath","reducedSmell","reducedTaste","runnyNose","wheezing","chestPain","bodyAche","lightHeadedness","confusion","fatigue","soreThroat","nausea","dryCough","wetCough","diarrhea","abdominalPain","location","birthMonth","birthYear","city","county","country","phoneNumber","tested","numTimesTested","testedPositive","seenPhysician","doctorDiagnosis","hasAgreedToTerms","reducer","action","newForm","symptom","UserContext","createContext","UserProvider","children","useReducer","dispatchGlobal","authFlag","setAuthFlag","callback","loggedIn","getIdToken","then","token","getUserData","resp","body","catch","onAuthStateChanged","Provider","initialState","uiAlert","showSplash","loginSignupModal","localStorage","getItem","lastCountriesUpdate","setItem","GlobalProvider","bootstrapApp","tinyText","AcctReqExplain","aria-label","transformOrigin","rel","AgreeToTerms","dispatchForm","showTermsModal","setShowTermsModal","FormControlLabel","control","Checkbox","name","data-cy","checked","onChange","label","e","title","EmailSignupFields","handleSignupError","handleSignupSuccess","captchaVerified","setCaptchaVerified","submitting","setSubmitting","formReducer","emailSignupFormInitialState","formState","setFormValue","handleChange","handleEmailSignup","password2","code","window","recaptchaVerifier","RecaptchaVerifier","response","clear","render","err","container","justify","xs","sm","TextField","error","emailError","helperText","fullWidth","required","InputProps","startAdornment","InputAdornment","AccountCircle","passwordError","Https","passwordError2","Button","disabled","startIcon","Email","SignInLink","SignupForm","isLegitBrowser","registrationFormDispatch","symptomsFormState","symptomsFormDispatch","duration","handleGoogleLogin","handleFacebookLogin","GoogleIcon","xmlns","viewBox","d","SignupLoginBtn","textOverride","btnText","cypressDataAttrib","Facebook","LoginForm","showForgotPasswd","setShowForgotPasswd","setEmail","emailErrorMessage","setEmailErrorMessage","setPassword","passwordErrorMessage","setPasswordErrorMessage","handleLoginError","handleLoginSuccess","handleEmailLogin","LoginSignup","modalView","List","ErrorTriggerBtns","handleBSurlClick","triggerBadRequest","handleBadHelpClick","fetchGithubHtml","SecretSnackground","Container","superagent","postFormData","formData","authorization","post","set","send","get","getGeoJSONCountries","getCountryData","geoJSON","countryData","JSON","parse","propertiesHash","forEach","geoJSONCountries","locations","prefetchAboutData","queryCache","prefetchQuery","Infinity","onError","paddingTop","paddingBottom","cursor","AboutFooter","AboutSection","useAbout","dangerouslySetInnerHTML","__html","AboutContainer","Breadcrumb","ScrollTop","trigger","useScrollTrigger","Zoom","in","anchor","ownerDocument","document","querySelector","scrollIntoView","behavior","block","role","BackToTopBtn","Fab","CountryTable","columns","options","sortDirection","selectableRows","Burger","toggleDrawerOpen","drawerOpen","edge","burger","LoginSignupBtnDesktop","signupLoginMobile","htmlColor","LoginSignupBtnMobile","appBarBtns","signupLoginBtn","snugBtnMobile","LoginSignupBtn","MySymptomsBtn","TitleWrap","noWrap","subTitle","TopBarBtns","UserPopoverMenu","TopBar","isHome","grey","boxShadow","paddingRight","drawer","toolbar","textDecoration","textShadow","titleAndBadge","flexWrap","flex","marginLeft","primary","minWidth","badge","topBarStyles","Slide","appear","direction","AppBar","Toolbar","disableGutters","noBgChangeOnHover","exitIcon","avatar","useHistory","keepMounted","disableAutoFocusItem","MenuItem","ListItemText","gutterBottom","borderStyle","toolbarIcon","mixins","appBarSpacer","content","values","md","fixedHeight","Dashboard","useLocation","pathname","MobileOffCanvasNav","Drawer","onKeyDown","summary","ShareButtonConfig","FacebookShareButton","quote","FacebookIcon","round","TwitterShareButton","TwitterIcon","WhatsappShareButton","WhatsappIcon","LinkedinShareButton","source","LinkedinIcon","PinterestShareButton","media","PinterestIcon","RedditShareButton","RedditIcon","EmailShareButton","subject","EmailIcon","ShareButtons","wrap","shareBtn","shareBtnMobile","SharingPopoutMenu","handleClick","aria-describedby","actionBtn","dialogContent","SimpleModal","leftSideElems","fullScreen","setOpen","Dialog","aria-labelledby","DialogTitle","DialogContent","dividers","DialogActions","shadow","list","listItem","navItemLink","WebkitFilter","SiteNavBtns","button","RouterLink","Alert","elevation","Symptoms","CustomSnackbar","handleCloseInternal","reason","Snackbar","autoHideDuration","dialogTitle","closeButton","symptomsBtn","exitToMapBtn","Title","other","disableTypography","SplashScreen","align","Disclaimer","Transition","forwardRef","ref","success","dialog","SuccessConfModal","smallAndUp","transitionDuration","enter","exit","TransitionComponent","Divider","browserMessage","VerifyEmailForm","afterVerification","setEmailError","sent","setSent","setLoading","handleFirebaseError","alert","handleVerifyEmail","sendPasswordResetEmail","setTimeout","textTransform","Fade","AlertTitle","camelCaseToLabel","original","result","replace","charAt","toUpperCase","slice","checkbox","firstPageBtnsWrap","datePicker","link","SymptomStep","setActiveStep","allSymptoms","halfwayThrough","floor","firstHalfSymptoms","splice","lastHalfSymptoms","showDates","setShowDates","getSymptoms","utils","DateFnsUtils","disableToolbar","format","maxDate","handleStartDateChange","KeyboardButtonProps","minDate","handleEndDateChange","idx","FormGroup","dropdown","selector","formLabel","TestingStep","FormControl","DatePicker","views","month","year","setFullYear","setMonth","getBirthMonthYear","getMonth","getFullYear","FormLabel","RadioGroup","row","String","Radio","InputLabel","Select","labelId","dialogText","LocationDetailsStep","onSelect","newAddress","geocodeByAddress","results","addressComponents","address_components","types","long_name","includes","getLatLng","latLng","searchOptions","debounce","shouldFetchSuggestions","getInputProps","suggestions","getSuggestionItemProps","placeholder","suggestion","description","RegistrationStep","fontWeight","stepper","Modal","setSuccessConfOpen","activeStep","dispatchSymptomsForm","signupFormState","signupFormDispatch","steps","submitSymptomsForm","firebaseUser","idToken","handleSubmit","currentUser","Stepper","labelProps","Step","StepLabel","step","displayStep","prevActiveStep","isNextDisabled","covidTheme","createMuiTheme","typography","fontFamily","dialogContentPadding","dialogHeadFootSpacing","overrides","MuiInput","MuiDialog","paperScrollPaper","maxHeight","paperFullWidth","MuiDialogTitle","MuiDialogActions","MuiDialogContent","GlobalCss","withStyles","responsiveFontSizes","Routes","successConfOpen","ThemeProvider","CssBaseline","basename","path","exact","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.de6d9963.chunk.js","sourcesContent":["export const MAPBOX_TOKEN = process.env.REACT_APP_MAPBOX_TOKEN;\nexport const CLOUD_HTML_BASE_URL =\n  'https://raw.githubusercontent.com/abettermap/c19-self-report-content/master';\n\nexport const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n","import * as firebase from 'firebase';\n\nexport const firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_PROJECT,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport default firebase;\n","// Circular self-reported markers\nexport const SELF_REPORTED_STYLES = {\n  borderColor: 'hsl(39, 100%, 40%)',\n  fillColor: 'hsl(39, 100%, 50%)',\n  borderWidth: 2,\n  borderStyle: 'solid',\n  size: 15,\n};\n\n// Good tool: https://learnui.design/tools/data-color-picker.html#single\nexport const countriesSymbology = {\n  total_confirmed: {\n    palette: [\n      '#b0edf3',\n      '#99d7de',\n      '#83c2c9',\n      '#6caeb4',\n      '#5699a0',\n      '#3f858c',\n      '#267279',\n      '#005f66',\n    ],\n    ranges: [100, 500, 2500, 12500, 62500, 312500],\n  },\n  total_deaths: {\n    palette: [\n      '#fff5f0',\n      '#fee0d2',\n      '#fcbba1',\n      '#fc9272',\n      '#fb6a4a',\n      '#ef3b2c',\n      '#cb181d',\n      '#99000d',\n    ],\n    ranges: [625, 1250, 2500, 5000, 10000, 20000],\n  },\n  total_recovered: {\n    palette: [\n      '#f7fcf5',\n      '#e5f5e0',\n      '#c7e9c0',\n      '#a1d99b',\n      '#74c476',\n      '#41ab5d',\n      '#238b45',\n      '#005a32',\n    ],\n    ranges: [78.125, 312.5, 1250, 5000, 20000, 80000],\n  },\n};\n\n// TODO: wire up the colors\nexport const tickersConfig = {\n  selfReported: {\n    defText: 'Number of individuals who have reported their data on this site',\n    heading: 'Self-reported',\n    omitLastUpdated: true,\n    symbol: {\n      alwaysShow: true,\n      borderWidth: SELF_REPORTED_STYLES.borderWidth,\n      borderColor: SELF_REPORTED_STYLES.borderColor,\n      fillColor: SELF_REPORTED_STYLES.fillColor,\n      isCircular: true,\n      colorStops: [],\n    },\n  },\n  recovered: {\n    defText:\n      'Number of individuals clinically confirmed positive for COVID-19 with a test, who have recovered from symptoms',\n    heading: 'Recovered',\n    symbol: {\n      globalStateKey: 'total_recovered',\n      fillColor: '#41ab5d',\n      colorStops: countriesSymbology.total_recovered.palette,\n    },\n  },\n  confirmed: {\n    defText:\n      'Number of individuals clinically confirmed positive for COVID-19 with a test',\n    heading: 'Confirmed',\n    symbol: {\n      globalStateKey: 'total_confirmed',\n      fillColor: '#5699a0',\n      colorStops: countriesSymbology.total_confirmed.palette,\n    },\n  },\n  deaths: {\n    defText:\n      'Number of individuals clinically confirmed positive for COVID-19 with a test, who have died from complications related to illness caused by COVID-19',\n    heading: 'Deaths',\n    symbol: {\n      globalStateKey: 'total_deaths',\n      fillColor: '#ef3b2c',\n      colorStops: countriesSymbology.total_deaths.palette,\n    },\n  },\n};\n","import React, { FC, useContext } from 'react';\nimport { Box } from '@material-ui/core';\n\nimport { LegendSymbolTypes } from './types';\nimport { GlobalContext } from 'components';\n\nexport const LegendSymbol: FC<LegendSymbolTypes> = ({\n  fillColor,\n  borderColor = 'hsl(0, 0%, 89%)',\n  isCircular = false,\n  size = '0.8em',\n  borderWidth = 1,\n  alwaysShow,\n  globalStateKey,\n}) => {\n  const { state } = useContext(GlobalContext);\n\n  return (\n    <Box\n      width={size}\n      height={size}\n      display={\n        alwaysShow || state.activeCountrySymbKey === globalStateKey\n          ? 'flex'\n          : 'none'\n      }\n      marginRight=\"4px\"\n      alignItems=\"center\"\n    >\n      <Box\n        border={borderWidth}\n        borderRadius={isCircular ? '100%' : 0}\n        height=\"100%\"\n        width=\"100%\"\n        bgcolor={fillColor}\n        borderColor={borderColor}\n      />\n    </Box>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Box } from '@material-ui/core';\n\nimport { LegendSymbolBarTypes } from './types';\nimport { GlobalContext } from 'components';\nimport { SetCountriesSymb } from 'components/ticker-cards';\n\nconst useStyles = makeStyles(theme => ({\n  barLabels: {\n    fontSize: 12,\n    display: 'flex',\n    justifyContent: 'space-between',\n    color: theme.palette.background.default,\n    '& > *': {\n      lineHeight: 1,\n      marginTop: 4,\n    },\n  },\n  tickerFooterLink: {\n    fontSize: 14,\n    color: theme.palette.info.main,\n    display: 'block',\n  },\n}));\n\nexport const LegendSymbolBar: FC<LegendSymbolBarTypes> = ({\n  colorStops,\n  globalStateKey,\n}) => {\n  const classes = useStyles();\n  const { state } = useContext(GlobalContext);\n  const active = state.activeCountrySymbKey === globalStateKey;\n\n  return (\n    <>\n      {active ? (\n        <>\n          <Box display=\"flex\" justifyContent=\"center\">\n            <Box\n              width=\"100%\"\n              height={6}\n              borderRadius={2}\n              style={{\n                backgroundImage: `linear-gradient(to right, ${colorStops.join(\n                  ', '\n                )})`,\n              }}\n            />\n          </Box>\n          <Box className={classes.barLabels}>\n            <span>LOW</span>\n            <span>HIGH</span>\n          </Box>\n        </>\n      ) : (\n        <SetCountriesSymb\n          className={classes.tickerFooterLink}\n          globalStateKey={globalStateKey}\n        />\n      )}\n    </>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { Link } from '@material-ui/core';\n\nimport { GlobalContext } from 'components';\nimport { SetCountriesSymbTypes } from './types';\n\nexport const SetCountriesSymb: FC<SetCountriesSymbTypes> = ({\n  className,\n  globalStateKey,\n}) => {\n  const { dispatch } = useContext(GlobalContext);\n\n  const handleClick = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    dispatch({ type: 'SET_COUNTRY_SYMBOLOGY', payload: globalStateKey });\n  };\n\n  return (\n    <Link href=\"#\" className={className} onClick={handleClick}>\n      Show\n    </Link>\n  );\n};\n","import { GeoJSONData } from 'types/api';\n\nexport const prettyPrint = (value: number) => {\n  if (value === undefined) {\n    return 'N/A';\n  }\n\n  return value.toLocaleString(navigator.language, {\n    minimumFractionDigits: 0,\n  });\n};\n\n/** https://www.whatismybrowser.com/guides/the-latest-user-agent/\n * Chrome:\n *  { Chrome: Windows, Mac OS, Linux, Android },\n *  { CriOS: iOS }\n * Firefox:\n *  { Firefox: Windows, Mac OS, Linux, Android },\n *  { FxiOS: iOS}\n * Safari:\n *  { Safari: Mac OS, iOS }\n * IE:\n *  { MSIE: IE 8, IE9, IE10 }\n *  { Trident: IE 11 }\n */\n// FB/Google auth do not work from within iOS FB or LinkedIn in-app \"browsers\"\nexport const isValidUserAgent = () => {\n  const USER_AGENT = navigator.userAgent;\n\n  return (\n    USER_AGENT.indexOf('Chrome') !== -1 ||\n    USER_AGENT.indexOf('CriOS') !== -1 ||\n    USER_AGENT.indexOf('Firefox') !== -1 ||\n    USER_AGENT.indexOf('FxiOS') !== -1 ||\n    USER_AGENT.indexOf('Safari') !== -1 ||\n    USER_AGENT.indexOf('MSIE') !== -1 ||\n    USER_AGENT.indexOf('Trident') !== -1\n  );\n};\n\n// For the ticker card totals...\nexport const calculateTotals = (\n  data: GeoJSONData,\n  initial: {\n    total_confirmed: number;\n    total_deaths: number;\n    total_recovered: number;\n  }\n) => {\n  return data.reduce((sums, thisOne: any) => {\n    const { properties } = thisOne;\n    const { total_confirmed, total_deaths, total_recovered } = properties;\n\n    return {\n      total_confirmed: sums.total_confirmed + (total_confirmed || 0),\n      total_deaths: sums.total_deaths + (total_deaths || 0),\n      total_recovered: sums.total_recovered + (total_recovered || 0),\n    };\n  }, initial);\n};\n","import React, { FC } from 'react';\nimport { Grid, Paper, Typography, CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  RequiredTotalsKeys,\n  TickerTitleTypes,\n  TickerCard,\n  TickerCardTypes,\n} from './types';\nimport { prettyPrint } from 'utils';\nimport {\n  TickerInfoPopover,\n  LegendSymbol,\n  LegendSymbolBar,\n  ToggleLayer,\n} from 'components/ticker-cards';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.common.white,\n    display: 'flex',\n    flexDirection: 'column',\n    overflow: 'auto',\n    height: '100%', // fill the grid\n    justifyContent: 'center',\n    // Little more on the top so the \"i\" btn doesn't cover the card heading\n    padding: `${theme.spacing(2)}px ${theme.spacing(1)}px 4px`,\n    position: 'relative',\n    [theme.breakpoints.up('md')]: {\n      marginBottom: theme.spacing(1),\n      width: 135,\n    },\n  },\n  heading: {\n    lineHeight: 1,\n    fontSize: '1rem',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  tickerVal: {\n    color: theme.palette.common.black,\n    fontSize: '1.9rem',\n    marginBottom: 'auto', // make flexbox align nicely\n    [theme.breakpoints.up('md')]: {\n      fontSize: '2.3rem',\n    },\n  },\n  tickerCardsWrap: {\n    position: 'absolute',\n    zIndex: 400,\n    [theme.breakpoints.down('sm')]: {\n      bottom: 20, // above attribution\n      display: 'grid',\n      gridColumnGap: 6,\n      gridRowGap: 6,\n      gridTemplateColumns: 'repeat(2, 1fr)',\n      right: 6,\n      width: 250,\n    },\n    [theme.breakpoints.up('md')]: {\n      right: theme.spacing(2),\n      top: 115, // past top bar (except on tweeners like iPhone landscape)\n    },\n  },\n  tickerFooterLink: {\n    fontSize: '0.9rem',\n    color: theme.palette.info.main,\n    display: 'block',\n  },\n}));\n\nconst CardTitle: FC<TickerTitleTypes> = ({ heading, renderLegendSymbol }) => {\n  const classes = useStyles();\n\n  return (\n    <Typography\n      component=\"h2\"\n      variant=\"subtitle2\"\n      color=\"primary\"\n      className={classes.heading}\n    >\n      {renderLegendSymbol()}\n      {heading}\n    </Typography>\n  );\n};\n\nconst NotifierCard: FC<TickerCard> = props => {\n  const classes = useStyles();\n  const { number, renderTitle, renderPopover, renderSymbolBar } = props;\n\n  return (\n    <Grid item className={classes.root}>\n      <Paper className={classes.paper}>\n        {renderTitle()}\n        <Typography component=\"h4\" variant=\"h4\" className={classes.tickerVal}>\n          {number ? prettyPrint(number) : <CircularProgress size={30} />}\n        </Typography>\n        <div style={{ minHeight: 24 }}>{renderSymbolBar()}</div>\n        {renderPopover()}\n      </Paper>\n    </Grid>\n  );\n};\n\nexport const TickerCards: FC<TickerCardTypes> = ({ data, config }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.tickerCardsWrap}>\n      {/* TODO: use `keyof` to restrict possible values appropriately */}\n      {Object.keys(config).map((key: string) => {\n        const { heading, defText, symbol, omitLastUpdated } = config[\n          key as RequiredTotalsKeys\n        ];\n\n        return (\n          <NotifierCard\n            key={key}\n            heading={heading}\n            number={data[key as RequiredTotalsKeys]}\n            renderTitle={() => (\n              <CardTitle\n                heading={heading}\n                renderLegendSymbol={() => <LegendSymbol {...symbol} />}\n              />\n            )}\n            renderPopover={() => (\n              <TickerInfoPopover\n                heading={heading}\n                defText={defText}\n                omitLastUpdated={omitLastUpdated}\n              />\n            )}\n            renderSymbolBar={() =>\n              symbol.colorStops.length && symbol.globalStateKey ? (\n                <LegendSymbolBar\n                  footerLinkClassName={classes.tickerFooterLink}\n                  globalStateKey={symbol.globalStateKey}\n                  colorStops={symbol.colorStops}\n                />\n              ) : (\n                <ToggleLayer\n                  visibilityKey={key}\n                  className={classes.tickerFooterLink}\n                />\n              )\n            }\n          />\n        );\n      })}\n    </div>\n  );\n};\n","export const prettyDate = (date: Date) => {\n  const timezoneDate = new Date(\n    date.getTime() - date.getTimezoneOffset() * 60000\n  );\n  return `${timezoneDate.toLocaleDateString()} ${timezoneDate.toLocaleTimeString()}`;\n};\n","import React, { FC } from 'react';\nimport { Link as RouteLink } from 'react-router-dom';\nimport {\n  ListSubheader,\n  Typography,\n  List,\n  ListItem,\n  Popover,\n  IconButton,\n} from '@material-ui/core';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { TickerInfoType } from './types';\nimport { prettyDate } from 'utils/dates';\nimport { useQuery } from 'react-query';\nimport { getCountryGeoJSONData } from 'utils/api';\n\nconst useStyles = makeStyles(theme => ({\n  popover: {\n    width: 250,\n  },\n  definitionText: {\n    whiteSpace: 'pre-wrap',\n  },\n  infoBtn: {\n    padding: 0,\n    position: 'absolute',\n    top: 3,\n    right: 3,\n    fontSize: '1rem',\n  },\n  viewInfoLink: {\n    color: theme.palette.info.main,\n    '& :visited': {\n      color: theme.palette.info.main,\n    },\n  },\n}));\n\n// A popover menu and toggle button to show a term and its definition. For now\n// just links to \"/about\" route. May want sub-routes or at least \"#section-id\"\n// for scrolling directly to sections.\nexport const TickerInfoPopover: FC<TickerInfoType> = ({\n  defText,\n  heading,\n  omitLastUpdated,\n}) => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const classes = useStyles();\n  const { data, status } = useQuery('countryTotals', getCountryGeoJSONData, {\n    staleTime: 300000,\n  });\n\n  const lastUpdated =\n    status === 'success' &&\n    data &&\n    data[0].properties &&\n    'date' in data[0].properties\n      ? new Date(data[0].properties['date'])\n      : undefined;\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <>\n      <IconButton\n        aria-controls=\"ticker-info-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        size=\"small\"\n        className={classes.infoBtn}\n      >\n        <InfoIcon color=\"primary\" fontSize=\"inherit\" />\n      </IconButton>\n      <Popover\n        id=\"ticker-info-menu\"\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        anchorEl={anchorEl}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n        classes={{ paper: classes.popover }}\n      >\n        <List\n          subheader={<ListSubheader>{heading}</ListSubheader>}\n          component=\"ul\"\n          className={classes.popover}\n        >\n          <ListItem className={classes.definitionText}>{defText}</ListItem>\n          <ListItem divider>\n            {!omitLastUpdated && (\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                LAST UPDATED: {lastUpdated ? prettyDate(lastUpdated) : 'N/A'}\n              </Typography>\n            )}\n          </ListItem>\n          <ListItem\n            component={RouteLink}\n            to=\"/about\"\n            onClick={handleClose}\n            className={classes.viewInfoLink}\n          >\n            View info\n          </ListItem>\n        </List>\n      </Popover>\n    </>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { Link } from '@material-ui/core';\n\nimport { ToggleLayerTypes } from './types';\nimport { GlobalContext } from 'components';\n\nexport const ToggleLayer: FC<ToggleLayerTypes> = ({\n  className,\n  visibilityKey,\n}) => {\n  const { state, dispatch } = useContext(GlobalContext);\n\n  const handleClick = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    dispatch({ type: 'TOGGLE_LAYER_VISIBILITY', payload: visibilityKey });\n  };\n\n  return (\n    <Link href=\"#\" className={className} onClick={handleClick}>\n      {state.layerVisibility[visibilityKey] ? 'Hide' : 'Show'}\n    </Link>\n  );\n};\n","import L from 'leaflet';\nimport chroma from 'chroma-js';\n// @ts-ignore\nimport GeoStats from 'geostats';\n\nimport { GenericGeojsonType } from 'components/map/types';\nimport { SELF_REPORTED_STYLES } from 'config/map';\nconst indivMarkerDiameter = SELF_REPORTED_STYLES.size;\n\ninterface SymbConfigTypes {\n  field: string; // field to symbolize on\n  palette: string[]; // array of colors\n  ranges: number[]; // manually-set class breaks\n  precision?: number; // round to nearest whole by default\n}\n\ninterface PropertiesGeneric {\n  properties: {\n    [key: string]: number; // generic key since properties[field] is dynamic\n  };\n}\n\n// https://github.com/Leaflet/Leaflet.markercluster#customising-the-clustered-markers\n// NOTE: iconCreateFunction run by leaflet, which doesn't support ES6 arrow func\nexport const createClusterCustomIcon = function(\n  cluster: any // TODO: legit type?\n) {\n  const childCount = cluster.getChildCount();\n  let diameter = childCount * 5;\n\n  // TODO: try Math.min, Math.max, etc. instead\n  if (diameter > 50) {\n    diameter = 50;\n  } else if (diameter < indivMarkerDiameter) {\n    diameter = indivMarkerDiameter;\n  }\n\n  return L.divIcon({\n    className: 'self-reported-symbol',\n    iconSize: L.point(diameter, diameter, true),\n  });\n};\n\n// Individual circular icon (divIcon has more style flexibility than <Circle>)\nexport const indivMarkerIcon = L.divIcon({\n  className: 'self-reported-symbol',\n  iconSize: L.point(indivMarkerDiameter, indivMarkerDiameter, true),\n});\n\nexport const setSymbology = (\n  srcFeats: GenericGeojsonType[],\n  config: SymbConfigTypes\n) => {\n  // GTFO if nothing to work with\n  if (!srcFeats.length) {\n    return {\n      features: [],\n      legend: [],\n    };\n  }\n\n  // Round to nearest whole by default\n  const { precision = 0, field, palette, ranges } = config;\n  const arrValsForSymb = srcFeats\n    .filter(\n      ({ properties }: PropertiesGeneric) => properties[field] !== undefined\n    )\n    .map(({ properties }: PropertiesGeneric) => properties[field]);\n\n  const serie = new GeoStats(arrValsForSymb);\n  const min = Math.min(...arrValsForSymb); // likely 0, but just in case...\n  const max = Math.max(...arrValsForSymb);\n\n  serie.setClassManually([min, ...ranges, max]);\n  serie.setPrecision(precision);\n  serie.setColors(palette);\n\n  // TODO: restore legend\n  // const { ranges } = serie;\n  // const legend = (ranges.length ? ranges : classes).map(\n  // const legend = ranges.map((item: string, i: number) => {\n  //   return {\n  //     label: item,\n  //     color: palette[i],\n  //   };\n  // });\n\n  const features = srcFeats.map((feature: PropertiesGeneric) => {\n    // Default to gray if there is no data available\n    const gray = 'hsl(0, 0%, 89%)';\n    let color = gray;\n    let fillColor: string | chroma.Color = gray;\n    const { properties } = feature;\n    let valueToUse = properties[field];\n\n    if (valueToUse !== undefined) {\n      const classValue = serie.getClass(valueToUse);\n      color = palette[classValue];\n      fillColor = chroma(color);\n    }\n\n    return {\n      ...feature,\n      properties: {\n        ...properties,\n        style: {\n          color: 'hsl(180, 2%, 70%)',\n          fillColor,\n        },\n      },\n    };\n  });\n\n  return { features };\n};\n","import React, { FC, useContext } from 'react';\nimport { Map as LeafletMap, FeatureGroup, ZoomControl } from 'react-leaflet';\nimport { makeStyles, useMediaQuery, useTheme } from '@material-ui/core';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\nimport { CountriesFieldsForTotals } from 'context/types';\nimport { MapProps } from './types';\nimport { countriesSymbology } from 'config/map';\nimport { setSymbology } from 'utils/map';\nimport { GlobalContext } from 'components';\nimport { Polygons, MapboxTileLayer, SubmittedCases } from 'components/map';\n\nrequire('react-leaflet-markercluster/dist/styles.min.css');\n\n// @ts-ignore: Unreachable code error\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nconst useStyles = makeStyles(theme => ({\n  theMapItself: {\n    width: '100%',\n    height: '100%',\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    '& .leaflet-tooltip': {\n      padding: '16px 12px',\n    },\n    // No one cares about zoom controls on small touch devices\n    '& .leaflet-control-zoom': {\n      [theme.breakpoints.down('sm')]: {\n        display: 'none',\n      },\n    },\n  },\n}));\n\nexport const Map: FC<MapProps> = ({ data, submittedFeats }) => {\n  const { state } = useContext(GlobalContext);\n  const activeCountrySymbKey: keyof CountriesFieldsForTotals =\n    state.activeCountrySymbKey;\n  const styles = useStyles();\n  const theme = useTheme();\n  const smallToMid = useMediaQuery(theme.breakpoints.up('sm'));\n  const midsizeAndUp = useMediaQuery(theme.breakpoints.up('md'));\n  const huge = useMediaQuery(theme.breakpoints.up('xl'));\n\n  // @ts-ignore // TODO: remove this shame\n  const polySymb = countriesSymbology[activeCountrySymbKey];\n\n  let center = { lat: 0, lng: -90 };\n  let zoom = 2;\n\n  if (smallToMid) {\n    center = { lat: 0, lng: -75 };\n    zoom = 3;\n  }\n\n  if (midsizeAndUp) {\n    center = { lat: 34, lng: 15 };\n    zoom = 2;\n  }\n\n  if (huge) {\n    center = { lat: 24, lng: 5 };\n    zoom = 3;\n  }\n\n  return (\n    <LeafletMap\n      center={center}\n      zoom={zoom}\n      className={styles.theMapItself}\n      zoomControl={false}\n    >\n      <MapboxTileLayer tilesetId=\"dark-v9\" />\n      {state.layerVisibility.countries && (\n        <FeatureGroup>\n          <Polygons\n            // @ts-ignore\n            features={\n              setSymbology(data, { ...polySymb, field: activeCountrySymbKey })\n                .features\n            }\n          />\n        </FeatureGroup>\n      )}\n      {state.layerVisibility.selfReported && (\n        <FeatureGroup>\n          <SubmittedCases data={submittedFeats} />\n        </FeatureGroup>\n      )}\n      <ZoomControl position=\"bottomright\" />\n    </LeafletMap>\n  );\n};\n","import React, { FC } from 'react';\nimport { TileLayer } from 'react-leaflet';\n\nimport { MapboxType } from './types';\nimport { MAPBOX_TOKEN as accessToken } from 'config';\n\nexport const MapboxTileLayer: FC<MapboxType> = ({ tilesetId }) => {\n  const baseUrl = 'https://api.mapbox.com/styles/v1/mapbox';\n  const attribution = `Ãƒâ€šÃ‚Â© <a href=\"https://apps.mapbox.com/feedback/\">Mapbox</a>`;\n  const url = `${baseUrl}/${tilesetId}/tiles/{z}/{x}/{y}?access_token=${accessToken}`;\n  // CRED: https://stackoverflow.com/a/37043490/1048518\n  // Prevent tiny font/overly sharp resolution\n  return <TileLayer {...{ url, attribution, tileSize: 512, zoomOffset: -1 }} />;\n};\n","import React, { FC } from 'react';\nimport { Box, Link } from '@material-ui/core';\n\n// Required when using free Mapbox stuff such as background tiles. Docs:\n// docs.mapbox.com/help/how-mapbox-works/attribution/#other-mapping-frameworks\nexport const MapboxWordmark: FC = () => {\n  const wordMarkLinkStyle = {\n    // Mapbox wordmark via data URI\n    backgroundImage:\n      'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODAuNDcgMjAuMDIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwLjQ3IDIwLjAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe29wYWNpdHk6MC42O2ZpbGw6I0ZGRkZGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30uc3Qxe29wYWNpdHk6MC42O2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTc5LjI5LDEzLjYxYzAsMC4xMS0wLjA5LDAuMi0wLjIsMC4yaC0xLjUzYy0wLjEyLDAtMC4yMy0wLjA2LTAuMjktMC4xNmwtMS4zNy0yLjI4bC0xLjM3LDIuMjhjLTAuMDYsMC4xLTAuMTcsMC4xNi0wLjI5LDAuMTZoLTEuNTNjLTAuMDQsMC0wLjA4LTAuMDEtMC4xMS0wLjAzYy0wLjA5LTAuMDYtMC4xMi0wLjE4LTAuMDYtMC4yN2MwLDAsMCwwLDAsMGwyLjMxLTMuNWwtMi4yOC0zLjQ3Yy0wLjAyLTAuMDMtMC4wMy0wLjA3LTAuMDMtMC4xMWMwLTAuMTEsMC4wOS0wLjIsMC4yLTAuMmgxLjUzYzAuMTIsMCwwLjIzLDAuMDYsMC4yOSwwLjE2bDEuMzQsMi4yNWwxLjMzLTIuMjRjMC4wNi0wLjEsMC4xNy0wLjE2LDAuMjktMC4xNmgxLjUzYzAuMDQsMCwwLjA4LDAuMDEsMC4xMSwwLjAzYzAuMDksMC4wNiwwLjEyLDAuMTgsMC4wNiwwLjI3YzAsMCwwLDAsMCwwTDc2Ljk2LDEwbDIuMzEsMy41Qzc5LjI4LDEzLjUzLDc5LjI5LDEzLjU3LDc5LjI5LDEzLjYxeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02My4wOSw5LjE2Yy0wLjM3LTEuNzktMS44Ny0zLjEyLTMuNjYtMy4xMmMtMC45OCwwLTEuOTMsMC40LTIuNiwxLjEyVjMuMzdjMC0wLjEyLTAuMS0wLjIyLTAuMjItMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjIsMC4xLTAuMjIsMC4yMnYxMC4yMWMwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMnYtMC43YzAuNjgsMC43MSwxLjYyLDEuMTIsMi42LDEuMTJjMS43OSwwLDMuMjktMS4zNCwzLjY2LTMuMTNDNjMuMjEsMTAuMyw2My4yMSw5LjcyLDYzLjA5LDkuMTZMNjMuMDksOS4xNnogTTU5LjEyLDEyLjQxYy0xLjI2LDAtMi4yOC0xLjA2LTIuMy0yLjM2VjkuOTljMC4wMi0xLjMxLDEuMDQtMi4zNiwyLjMtMi4zNnMyLjMsMS4wNywyLjMsMi4zOVM2MC4zOSwxMi40MSw1OS4xMiwxMi40MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguMjYsNi4wNGMtMS44OS0wLjAxLTMuNTQsMS4yOS0zLjk2LDMuMTNjLTAuMTIsMC41Ni0wLjEyLDEuMTMsMCwxLjY5YzAuNDIsMS44NSwyLjA3LDMuMTYsMy45NywzLjE0YzIuMjQsMCw0LjA2LTEuNzgsNC4wNi0zLjk5UzcwLjUxLDYuMDQsNjguMjYsNi4wNHogTTY4LjI0LDEyLjQyYy0xLjI3LDAtMi4zLTEuMDctMi4zLTIuMzlzMS4wMy0yLjQsMi4zLTIuNHMyLjMsMS4wNywyLjMsMi4zOVM2OS41MSwxMi40MSw2OC4yNCwxMi40Mkw2OC4yNCwxMi40MnoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTkuMTIsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNjAuMzksNy42Myw1OS4xMiw3LjYzeiBNNTkuMTIsMTEuMjNjLTAuNiwwLTEuMDktMC41My0xLjExLTEuMTlWMTBjMC4wMS0wLjY2LDAuNTEtMS4xOSwxLjExLTEuMTlzMS4xMSwwLjU0LDEuMTEsMS4yMVM1OS43NCwxMS4yMyw1OS4xMiwxMS4yM3oiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjguMjQsNy42M2MtMS4yNywwLTIuMywxLjA3LTIuMywyLjM5czEuMDMsMi4zOSwyLjMsMi4zOXMyLjMtMS4wNywyLjMtMi4zOVM2OS41MSw3LjYzLDY4LjI0LDcuNjN6IE02OC4yNCwxMS4yM2MtMC42MSwwLTEuMTEtMC41NC0xLjExLTEuMjFzMC41LTEuMiwxLjExLTEuMnMxLjExLDAuNTQsMS4xMSwxLjIxUzY4Ljg1LDExLjIzLDY4LjI0LDExLjIzeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00My41Niw2LjI0aC0xLjMzYy0wLjEyLDAtMC4yMiwwLjEtMC4yMiwwLjIydjAuN2MtMC42OC0wLjcxLTEuNjItMS4xMi0yLjYtMS4xMmMtMi4wNywwLTMuNzUsMS43OC0zLjc1LDMuOTlzMS42OSwzLjk5LDMuNzUsMy45OWMwLjk5LDAsMS45My0wLjQxLDIuNi0xLjEzdjAuN2MwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMlY2LjQ0YzAtMC4xMS0wLjA5LTAuMjEtMC4yMS0wLjIxQzQzLjU3LDYuMjQsNDMuNTcsNi4yNCw0My41Niw2LjI0eiBNNDIuMDIsMTAuMDVjLTAuMDEsMS4zMS0xLjA0LDIuMzYtMi4zLDIuMzZzLTIuMy0xLjA3LTIuMy0yLjM5czEuMDMtMi40LDIuMjktMi40YzEuMjcsMCwyLjI4LDEuMDYsMi4zLDIuMzZMNDIuMDIsMTAuMDV6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTM5LjcyLDcuNjNjLTEuMjcsMC0yLjMsMS4wNy0yLjMsMi4zOXMxLjAzLDIuMzksMi4zLDIuMzlzMi4yOC0xLjA2LDIuMy0yLjM2VjkuOTlDNDIsOC42OCw0MC45OCw3LjYzLDM5LjcyLDcuNjN6IE0zOC42MiwxMC4wMmMwLTAuNjcsMC41LTEuMjEsMS4xMS0xLjIxYzAuNjEsMCwxLjA5LDAuNTMsMS4xMSwxLjE5djAuMDRjLTAuMDEsMC42NS0wLjUsMS4xOC0xLjExLDEuMThTMzguNjIsMTAuNjgsMzguNjIsMTAuMDJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTQ5LjkxLDYuMDRjLTAuOTgsMC0xLjkzLDAuNC0yLjYsMS4xMlY2LjQ1YzAtMC4xMi0wLjEtMC4yMi0wLjIyLTAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLDAuMS0wLjIyLDAuMjJ2MTAuMjFjMCwwLjEyLDAuMSwwLjIyLDAuMjIsMC4yMmgxLjMzYzAuMTIsMCwwLjIyLTAuMSwwLjIyLTAuMjJ2LTMuNzhjMC42OCwwLjcxLDEuNjIsMS4xMiwyLjYxLDEuMTJjMi4wNywwLDMuNzUtMS43OCwzLjc1LTMuOTlTNTEuOTgsNi4wNCw0OS45MSw2LjA0eiBNNDkuNiwxMi40MmMtMS4yNiwwLTIuMjgtMS4wNi0yLjMtMi4zNlY5Ljk5YzAuMDItMS4zMSwxLjA0LTIuMzcsMi4yOS0yLjM3YzEuMjYsMCwyLjMsMS4wNywyLjMsMi4zOVM1MC44NiwxMi40MSw0OS42LDEyLjQyTDQ5LjYsMTIuNDJ6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTQ5LjYsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNTAuODYsNy42Myw0OS42LDcuNjN6IE00OS42LDExLjIzYy0wLjYsMC0xLjA5LTAuNTMtMS4xMS0xLjE5VjEwQzQ4LjUsOS4zNCw0OSw4LjgxLDQ5LjYsOC44MWMwLjYsMCwxLjExLDAuNTUsMS4xMSwxLjIxUzUwLjIxLDExLjIzLDQ5LjYsMTEuMjN6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LjM2LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzRjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWOS4yNGMwLTAuOTMtMC43LTEuNjMtMS41NC0xLjYzYy0wLjc2LDAtMS4zOSwwLjY3LTEuNTEsMS41NGwwLjAxLDQuNDRjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuODEsMC0xLjQ3LDAuNzUtMS41MiwxLjcxdjQuMjdjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ0YzAuMDEtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMSwwLjEsMC4yMiwwLjIxdjAuNjNjMC40OC0wLjY1LDEuMjQtMS4wNCwyLjA2LTEuMDVoMC4wM2MxLjA0LDAsMS45OSwwLjU3LDIuNDgsMS40OGMwLjQzLTAuOSwxLjMzLTEuNDgsMi4zMi0xLjQ5YzEuNTQsMCwyLjc5LDEuMTksMi43NiwyLjY1TDM0LjM2LDEzLjU5eiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MC4zMiwxMi45N2wtMC4wNy0wLjEyTDc4LjM4LDEwbDEuODUtMi44MWMwLjQyLTAuNjQsMC4yNS0xLjQ5LTAuMzktMS45MmMtMC4wMS0wLjAxLTAuMDItMC4wMS0wLjAzLTAuMDJjLTAuMjItMC4xNC0wLjQ4LTAuMjEtMC43NC0wLjIxaC0xLjUzYy0wLjUzLDAtMS4wMywwLjI4LTEuMywwLjc0bC0wLjMyLDAuNTNsLTAuMzItMC41M2MtMC4yOC0wLjQ2LTAuNzctMC43NC0xLjMxLTAuNzRoLTEuNTNjLTAuNTcsMC0xLjA4LDAuMzUtMS4yOSwwLjg4Yy0yLjA5LTEuNTgtNS4wMy0xLjQtNi45MSwwLjQzYy0wLjMzLDAuMzItMC42MiwwLjY5LTAuODUsMS4wOWMtMC44NS0xLjU1LTIuNDUtMi42LTQuMjgtMi42Yy0wLjQ4LDAtMC45NiwwLjA3LTEuNDEsMC4yMlYzLjM3YzAtMC43OC0wLjYzLTEuNDEtMS40LTEuNDFoLTEuMzNjLTAuNzcsMC0xLjQsMC42My0xLjQsMS40djMuNTdjLTAuOS0xLjMtMi4zOC0yLjA4LTMuOTctMi4wOWMtMC43LDAtMS4zOSwwLjE1LTIuMDIsMC40NWMtMC4yMy0wLjE2LTAuNTEtMC4yNS0wLjgtMC4yNWgtMS4zM2MtMC40MywwLTAuODMsMC4yLTEuMSwwLjUzYy0wLjAyLTAuMDMtMC4wNC0wLjA1LTAuMDctMC4wOGMtMC4yNy0wLjI5LTAuNjUtMC40NS0xLjA0LTAuNDVoLTEuMzJjLTAuMjksMC0wLjU3LDAuMDktMC44LDAuMjVDNDAuOCw1LDQwLjEyLDQuODUsMzkuNDIsNC44NWMtMS43NCwwLTMuMjcsMC45NS00LjE2LDIuMzhjLTAuMTktMC40NC0wLjQ2LTAuODUtMC43OS0xLjE5Yy0wLjc2LTAuNzctMS44LTEuMTktMi44OC0xLjE5aC0wLjAxYy0wLjg1LDAuMDEtMS42NywwLjMxLTIuMzQsMC44NGMtMC43LTAuNTQtMS41Ni0wLjg0LTIuNDUtMC44NGgtMC4wM2MtMC4yOCwwLTAuNTUsMC4wMy0wLjgyLDAuMWMtMC4yNywwLjA2LTAuNTMsMC4xNS0wLjc4LDAuMjdjLTAuMi0wLjExLTAuNDMtMC4xNy0wLjY3LTAuMTdoLTEuMzNjLTAuNzgsMC0xLjQsMC42My0xLjQsMS40djcuMTRjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zM2MwLjc4LDAsMS40MS0wLjYzLDEuNDEtMS40MWMwLDAsMCwwLDAsMFY5LjM1YzAuMDMtMC4zNCwwLjIyLTAuNTYsMC4zNC0wLjU2YzAuMTcsMCwwLjM2LDAuMTcsMC4zNiwwLjQ1djQuMzVjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zNGMwLjc4LDAsMS40LTAuNjMsMS40LTEuNGwtMC4wMS00LjM1YzAuMDYtMC4zLDAuMjQtMC40NSwwLjMzLTAuNDVjMC4xNywwLDAuMzYsMC4xNywwLjM2LDAuNDV2NC4zNWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjM0YzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0wLjM2YzAuOTEsMS4yMywyLjM0LDEuOTYsMy44NywxLjk2YzAuNywwLDEuMzktMC4xNSwyLjAyLTAuNDVjMC4yMywwLjE2LDAuNTEsMC4yNSwwLjgsMC4yNWgxLjMyYzAuMjksMCwwLjU3LTAuMDksMC44LTAuMjV2MS45MWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjMzYzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0xLjY5YzAuNDYsMC4xNCwwLjk0LDAuMjIsMS40MiwwLjIxYzEuNjIsMCwzLjA3LTAuODMsMy45Ny0yLjF2MC41YzAsMC43OCwwLjYzLDEuNCwxLjQsMS40aDEuMzNjMC4yOSwwLDAuNTctMC4wOSwwLjgtMC4yNWMwLjYzLDAuMywxLjMyLDAuNDUsMi4wMiwwLjQ1YzEuODMsMCwzLjQzLTEuMDUsNC4yOC0yLjZjMS40NywyLjUyLDQuNzEsMy4zNiw3LjIyLDEuODljMC4xNy0wLjEsMC4zNC0wLjIxLDAuNS0wLjM0YzAuMjEsMC41MiwwLjcyLDAuODcsMS4yOSwwLjg2aDEuNTNjMC41MywwLDEuMDMtMC4yOCwxLjMtMC43NGwwLjM1LTAuNThsMC4zNSwwLjU4YzAuMjgsMC40NiwwLjc3LDAuNzQsMS4zMSwwLjc0aDEuNTJjMC43NywwLDEuMzktMC42MywxLjM4LTEuMzlDODAuNDcsMTMuMzgsODAuNDIsMTMuMTcsODAuMzIsMTIuOTdMODAuMzIsMTIuOTd6IE0zNC4xNSwxMy44MWgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuNzYsMC0xLjM5LDAuNjctMS41MSwxLjU0bDAuMDEsNC40NGMwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjM0Yy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjkuMjRjMC0wLjkzLTAuNy0xLjYzLTEuNTQtMS42M2MtMC44MSwwLTEuNDcsMC43NS0xLjUyLDEuNzF2NC4yN2MwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjMzYy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjYuNDRjMC4wMS0wLjEyLDAuMS0wLjIxLDAuMjItMC4yMWgxLjMzYzAuMTIsMCwwLjIxLDAuMSwwLjIyLDAuMjF2MC42M2MwLjQ4LTAuNjUsMS4yNC0xLjA0LDIuMDYtMS4wNWgwLjAzYzEuMDQsMCwxLjk5LDAuNTcsMi40OCwxLjQ4YzAuNDMtMC45LDEuMzMtMS40OCwyLjMyLTEuNDljMS41NCwwLDIuNzksMS4xOSwyLjc2LDIuNjVsMC4wMSw0LjkxQzM0LjM3LDEzLjcsMzQuMjcsMTMuOCwzNC4xNSwxMy44MUMzNC4xNSwxMy44MSwzNC4xNSwxMy44MSwzNC4xNSwxMy44MXogTTQzLjc4LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJ2LTAuNzFDNDEuMzQsMTMuNiw0MC40LDE0LDM5LjQyLDE0Yy0yLjA3LDAtMy43NS0xLjc4LTMuNzUtMy45OXMxLjY5LTMuOTksMy43NS0zLjk5YzAuOTgsMCwxLjkyLDAuNDEsMi42LDEuMTJ2LTAuN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMS0wLjAxLDAuMjEsMC4wOCwwLjIyLDAuMmMwLDAuMDEsMCwwLjAxLDAsMC4wMlYxMy41OXogTTQ5LjkxLDE0Yy0wLjk4LDAtMS45Mi0wLjQxLTIuNi0xLjEydjMuNzhjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ1YzAtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMiwwLjEsMC4yMiwwLjIydjAuN2MwLjY4LTAuNzIsMS42Mi0xLjEyLDIuNi0xLjEyYzIuMDcsMCwzLjc1LDEuNzcsMy43NSwzLjk4UzUxLjk4LDE0LDQ5LjkxLDE0eiBNNjMuMDksMTAuODdDNjIuNzIsMTIuNjUsNjEuMjIsMTQsNTkuNDMsMTRjLTAuOTgsMC0xLjkyLTAuNDEtMi42LTEuMTJ2MC43YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWMy4zN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMiwwLDAuMjIsMC4xLDAuMjIsMC4yMnYzLjc4YzAuNjgtMC43MSwxLjYyLTEuMTIsMi42LTEuMTFjMS43OSwwLDMuMjksMS4zMywzLjY2LDMuMTJDNjMuMjEsOS43Myw2My4yMSwxMC4zMSw2My4wOSwxMC44N0w2My4wOSwxMC44N0w2My4wOSwxMC44N3ogTTY4LjI2LDE0LjAxYy0xLjksMC4wMS0zLjU1LTEuMjktMy45Ny0zLjE0Yy0wLjEyLTAuNTYtMC4xMi0xLjEzLDAtMS42OWMwLjQyLTEuODUsMi4wNy0zLjE1LDMuOTctMy4xNGMyLjI1LDAsNC4wNiwxLjc4LDQuMDYsMy45OVM3MC41LDE0LjAxLDY4LjI2LDE0LjAxTDY4LjI2LDE0LjAxeiBNNzkuMDksMTMuODFoLTEuNTNjLTAuMTIsMC0wLjIzLTAuMDYtMC4yOS0wLjE2bC0xLjM3LTIuMjhsLTEuMzcsMi4yOGMtMC4wNiwwLjEtMC4xNywwLjE2LTAuMjksMC4xNmgtMS41M2MtMC4wNCwwLTAuMDgtMC4wMS0wLjExLTAuMDNjLTAuMDktMC4wNi0wLjEyLTAuMTgtMC4wNi0wLjI3YzAsMCwwLDAsMCwwbDIuMzEtMy41bC0yLjI4LTMuNDdjLTAuMDItMC4wMy0wLjAzLTAuMDctMC4wMy0wLjExYzAtMC4xMSwwLjA5LTAuMiwwLjItMC4yaDEuNTNjMC4xMiwwLDAuMjMsMC4wNiwwLjI5LDAuMTZsMS4zNCwyLjI1bDEuMzQtMi4yNWMwLjA2LTAuMSwwLjE3LTAuMTYsMC4yOS0wLjE2aDEuNTNjMC4wNCwwLDAuMDgsMC4wMSwwLjExLDAuMDNjMC4wOSwwLjA2LDAuMTIsMC4xOCwwLjA2LDAuMjdjMCwwLDAsMCwwLDBMNzYuOTYsMTBsMi4zMSwzLjVjMC4wMiwwLjAzLDAuMDMsMC4wNywwLjAzLDAuMTFDNzkuMjksMTMuNzIsNzkuMiwxMy44MSw3OS4wOSwxMy44MUM3OS4wOSwxMy44MSw3OS4wOSwxMy44MSw3OS4wOSwxMy44MUw3OS4wOSwxMy44MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAsMS4yMWMtNC44NywwLTguODEsMy45NS04LjgxLDguODFzMy45NSw4LjgxLDguODEsOC44MXM4LjgxLTMuOTUsOC44MS04LjgxQzE4LjgxLDUuMTUsMTQuODcsMS4yMSwxMCwxLjIxeiBNMTQuMTgsMTIuMTljLTEuODQsMS44NC00LjU1LDIuMi02LjM4LDIuMmMtMC42NywwLTEuMzQtMC4wNS0yLTAuMTVjMCwwLTAuOTctNS4zNywyLjA0LTguMzljMC43OS0wLjc5LDEuODYtMS4yMiwyLjk4LTEuMjJjMS4yMSwwLDIuMzcsMC40OSwzLjIzLDEuMzVDMTUuOCw3LjczLDE1Ljg1LDEwLjUsMTQuMTgsMTIuMTl6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTEwLDAuMDJjLTUuNTIsMC0xMCw0LjQ4LTEwLDEwczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMEMxOS45OSw0LjUsMTUuNTIsMC4wMiwxMCwwLjAyeiBNMTAsMTguODNjLTQuODcsMC04LjgxLTMuOTUtOC44MS04LjgxUzUuMTMsMS4yLDEwLDEuMnM4LjgxLDMuOTUsOC44MSw4LjgxQzE4LjgxLDE0Ljg5LDE0Ljg3LDE4LjgzLDEwLDE4LjgzeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNC4wNCw1Ljk4Yy0xLjc1LTEuNzUtNC41My0xLjgxLTYuMi0wLjE0QzQuODMsOC44Niw1LjgsMTQuMjMsNS44LDE0LjIzczUuMzcsMC45Nyw4LjM5LTIuMDRDMTUuODUsMTAuNSwxNS44LDcuNzMsMTQuMDQsNS45OHogTTExLjg4LDkuODdsLTAuODcsMS43OGwtMC44Ni0xLjc4TDguMzgsOS4wMWwxLjc3LTAuODZsMC44Ni0xLjc4bDAuODcsMS43OGwxLjc3LDAuODZMMTEuODgsOS44N3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjEzLjY1LDkuMDEgMTEuODgsOS44NyAxMS4wMSwxMS42NSAxMC4xNSw5Ljg3IDguMzgsOS4wMSAxMC4xNSw4LjE1IDExLjAxLDYuMzcgMTEuODgsOC4xNSAiLz48L2c+PC9zdmc+)',\n    backgroundPosition: 0,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: '65px 20px',\n    display: 'block',\n    height: 20,\n    overflow: 'hidden',\n    textIndent: -9999,\n    width: 65,\n  };\n\n  return (\n    <Box position=\"absolute\" bottom={5} left={8} zIndex={99999}>\n      <Link\n        href=\"http://mapbox.com/about/maps\"\n        target=\"_blank\"\n        style={wordMarkLinkStyle}\n      >\n        Mapbox\n      </Link>\n    </Box>\n  );\n};\n","import React, { FC } from 'react';\nimport { Tooltip } from 'react-leaflet';\n\nimport { CountryRow } from 'types';\nimport { prettyPrint } from 'utils';\n\nexport const PolygonTooltip: FC<CountryRow> = props => (\n  <Tooltip opacity={1}>\n    {props.country_name ? (\n      <div style={{ width: 250 }}>\n        <h2 style={{ whiteSpace: 'pre-wrap', margin: 0 }}>\n          {props.country_name}\n        </h2>\n        <div\n          style={{\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gridColumnGap: 10,\n          }}\n        >\n          <div>\n            <h3 style={{ marginBottom: 5 }}>Totals</h3>\n            <ul style={{ paddingLeft: 5, margin: 0, listStyleType: 'none' }}>\n              <li>\n                <b>Confirmed:</b> {prettyPrint(props.total_confirmed)}\n              </li>\n              <li>\n                <b>Deaths:</b> {prettyPrint(props.total_deaths)}\n              </li>\n              <li>\n                <b>Recovered:</b> {prettyPrint(props.total_recovered)}\n              </li>\n            </ul>\n          </div>\n          <div>\n            <h3 style={{ marginBottom: 5 }}>Day changes</h3>\n            <ul style={{ paddingLeft: 5, margin: 0, listStyleType: 'none' }}>\n              <li>\n                <b>Confirmed:</b> {prettyPrint(props.new_confirmed)}\n              </li>\n              <li>\n                <b>Dead:</b> {prettyPrint(props.new_deaths)}\n              </li>\n              <li>\n                <b>Recovered:</b> {prettyPrint(props.new_recovered)}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    ) : (\n      <>\n        <h2>{props.NAME_LONG}</h2>\n        <b>No Data Available</b>\n      </>\n    )}\n  </Tooltip>\n);\n","import React, { FC } from 'react';\nimport { GeoJSON as NonReactGeoJSON } from 'leaflet';\nimport { Polygon } from 'react-leaflet';\n\nimport { IGeometry } from './types';\nimport { CountryRow } from 'types';\nimport { PolygonTooltip } from './PolygonTooltip';\n\ninterface PolygonProperties extends CountryRow {\n  style: {\n    color: string;\n    fillColor: string;\n    fill: boolean;\n    fillOpacity: number; // L default = 0.2\n    opacity: number; // line opacity\n    stroke: boolean; // line color\n    weight: number; // L default = 3\n  };\n}\n\ninterface PolygonFeature {\n  properties: PolygonProperties;\n  geometry: IGeometry;\n}\n\ninterface PolygonsTypes {\n  features: PolygonFeature[];\n}\n\nexport const Polygons: FC<PolygonsTypes> = ({ features }) => (\n  <>\n    {features.map(({ geometry, properties }: PolygonFeature, i: number) => {\n      // Had to do this since some sources have both Poly and Multipoly geom.\n      // See source code for how it's used: https://bit.ly/2PizL8i\n      const levelsDeep = geometry.type === 'Polygon' ? 1 : 2;\n      const positions = NonReactGeoJSON.coordsToLatLngs(\n        geometry.coordinates,\n        levelsDeep\n      );\n      const {\n        color,\n        fillColor,\n        fill = true,\n        fillOpacity = 0.75, // L default = 0.2\n        opacity = 1, // line opacity\n        stroke = true, // line color\n        weight = 1, // L default = 3\n      } = properties.style || {};\n\n      return (\n        <Polygon\n          key={i}\n          positions={positions}\n          {...{\n            color,\n            fill,\n            fillColor,\n            fillOpacity,\n            opacity,\n            stroke,\n            weight,\n          }}\n        >\n          <PolygonTooltip {...properties} />\n        </Polygon>\n      );\n    })}\n  </>\n);\n","import React, { FC } from 'react';\nimport { Marker, Popup } from 'react-leaflet';\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport { useQuery } from 'react-query';\n\nimport { SubmittedType, SelfReportedType } from './types';\nimport { prettyDate } from 'utils/dates';\nimport { getSubmittedCases } from 'utils/api';\nimport { createClusterCustomIcon, indivMarkerIcon } from 'utils/map';\n\nexport const SubmittedCases: FC<SubmittedType> = ({ data }) => {\n  const { status, data: submittedData } = useQuery(\n    'submitted',\n    getSubmittedCases,\n    { staleTime: 300000 }\n  );\n\n  if (status === 'loading') {\n    return <></>;\n  }\n\n  const submissions = submittedData ? submittedData : [];\n\n  return (\n    <MarkerClusterGroup\n      showCoverageOnHover={false}\n      iconCreateFunction={createClusterCustomIcon}\n      disableClusteringAtZoom={10}\n      spiderfyOnMaxZoom\n      maxClusterRadius={5}\n    >\n      {submissions.map((selfReportedItem: SelfReportedType, i: number) => (\n        <Marker\n          key={i}\n          position={[selfReportedItem.lat, selfReportedItem.lng]}\n          icon={indivMarkerIcon}\n        >\n          <Popup maxWidth={200}>\n            <h2>{selfReportedItem.address}</h2>\n            <p>\n              <small>\n                <i>\n                  Self-reported location{' '}\n                  {selfReportedItem.date\n                    ? `submitted ${prettyDate(new Date(selfReportedItem.date))}`\n                    : ''}\n                </i>\n              </small>\n            </p>\n          </Popup>\n        </Marker>\n      ))}\n    </MarkerClusterGroup>\n  );\n};\n","import React, { FC, useContext, useEffect } from 'react';\nimport { Box, Link } from '@material-ui/core';\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\nimport firebase from 'config/firebase';\nimport { tickersConfig } from 'config/map';\n\nimport { GlobalContext, SharingPopoutMenu, SplashScreen } from 'components';\nimport { TickerCards } from 'components/ticker-cards';\nimport { Map, MapboxWordmark } from 'components/map';\nimport { calculateTotals } from 'utils';\nimport { useCountryTotals, useSubmitted } from 'utils/queries';\n\nexport const Home: FC = () => {\n  const { state, dispatch } = useContext(GlobalContext);\n\n  let [totalConfirmed, totalDeaths, totalRecovered] = [0, 0, 0];\n\n  const { data: submissions } = useSubmitted(dispatch);\n  const { data: countryTotals, status: countryTotalsStatus } = useCountryTotals(\n    dispatch\n  ); // useQuery('countryTotals', getCountryGeoJSONData, { staleTime: 300000 });\n\n  const [user, loading] = useAuthState(firebase.auth());\n\n  if (countryTotalsStatus === 'success' && countryTotals) {\n    ({\n      total_confirmed: totalConfirmed,\n      total_deaths: totalDeaths,\n      total_recovered: totalRecovered,\n    } = calculateTotals(countryTotals, {\n      total_confirmed: 0,\n      total_deaths: 0,\n      total_recovered: 0,\n    }));\n  }\n\n  // this only shows the splash screen once, to users that haven't logged in\n  useEffect(() => {\n    if (!loading && !state.hasSeenSplash) {\n      if (!user) {\n        dispatch({ type: 'SHOW_SPLASH', payload: true });\n      } else {\n        dispatch({ type: 'SHOW_SPLASH', payload: false });\n      }\n    }\n  }, [loading, user, dispatch, state.hasSeenSplash]);\n\n  return (\n    <>\n      <SplashScreen />\n      <Box position=\"absolute\" bottom={54} left={8} zIndex={1}>\n        <SharingPopoutMenu />\n      </Box>\n      <Box position=\"absolute\" bottom={25} left={8} zIndex={1}>\n        <Link href=\"./terms-of-service\" color=\"textSecondary\">\n          Terms of service\n        </Link>\n      </Box>\n      <MapboxWordmark />\n      <Map data={countryTotals || []} submittedFeats={submissions} />\n      <TickerCards\n        config={tickersConfig}\n        data={{\n          confirmed: totalConfirmed,\n          deaths: totalDeaths,\n          recovered: totalRecovered,\n          selfReported: submissions && submissions.length,\n        }}\n      />\n    </>\n  );\n};\n","import React, { FC } from 'react';\n\nimport {\n  AboutSection,\n  AboutContainer,\n  AboutFooter,\n  Breadcrumb,\n} from 'components';\n\nconst mainAboutPages = [\n  'table-of-contents.html',\n  'intro.html',\n  'data-resources.html',\n  'team-information.html',\n  'our-partners.html',\n  'data-license.html',\n];\nconst termsOfServicePage = 'terms-of-service.html';\nconst privacyPolicyPage = 'privacy-policy.html';\n\nexport const htmlPages = [\n  ...mainAboutPages,\n  termsOfServicePage,\n  privacyPolicyPage,\n];\n\n// The main page\nexport const About: FC = () => (\n  <AboutContainer>\n    <Breadcrumb to=\"/\" text=\"< Home\" />\n    {mainAboutPages.map(page => (\n      <AboutSection filename={page} />\n    ))}\n    <AboutFooter />\n  </AboutContainer>\n);\n\nexport const TermsOfService: FC = () => (\n  <AboutContainer>\n    <Breadcrumb to=\"/\" text=\"Home\" />\n    <Breadcrumb to=\"/about\" text=\"About\" />\n    <AboutSection filename={termsOfServicePage} />\n  </AboutContainer>\n);\n\nexport const PrivacyPolicy: FC = () => (\n  <AboutContainer>\n    <Breadcrumb to=\"/\" text=\"Home\" />\n    <Breadcrumb to=\"/about\" text=\"About\" />\n    <AboutSection filename={privacyPolicyPage} />\n  </AboutContainer>\n);\n","import React, { FC } from 'react';\nimport { Typography } from '@material-ui/core';\n\nexport const Models: FC = () => {\n  return (\n    <div>\n      <Typography variant=\"h2\">Predictive Models</Typography>\n      <p>Coming soon...</p>\n    </div>\n  );\n};\n","import firebase from 'firebase/app';\nimport { DispatchFormType, GlobalContextDispatchType } from 'context/types';\nimport { History } from 'history';\n\nexport const signUp = async (\n  email: string,\n  password: string,\n  captcha: string\n) => {\n  // TODO verify captcha on backend\n  await firebase\n    .app()\n    .auth()\n    .createUserWithEmailAndPassword(email, password);\n};\n\nexport const logOut = async (\n  history: History,\n  userDispatch: DispatchFormType,\n  globalDispatch: GlobalContextDispatchType\n) => {\n  await firebase\n    .app()\n    .auth()\n    .signOut();\n\n  userDispatch({ type: 'RESET_USER_DATA' });\n\n  // Go home\n  history.push('/');\n\n  // Show success msg to user\n  globalDispatch({\n    type: 'TOGGLE_UI_ALERT',\n    payload: {\n      open: true,\n      message: 'You are now logged out',\n      severity: 'success',\n    },\n  });\n};\n\nexport const login = async (email: string, password: string) => {\n  await firebase\n    .app()\n    .auth()\n    .signInWithEmailAndPassword(email, password);\n};\n\nexport const googleLogin = async () => {\n  const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\n  await firebase.auth().signInWithPopup(googleAuthProvider);\n};\n\nexport const facebookLogin = async () => {\n  const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\n  await firebase.auth().signInWithPopup(facebookAuthProvider);\n};\n\nexport const onAuthStateChange = (callback: Function) => {\n  return firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      callback({ loggedIn: true });\n    } else {\n      callback({ loggedIn: false });\n    }\n  });\n};\n","import React, {\n  useContext,\n  createContext,\n  useReducer,\n  useState,\n  FC,\n  useEffect,\n} from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport firebase from 'config/firebase';\n\nimport { getUserData } from 'utils/api';\nimport { SymptomForm, SubmissionFormAction } from 'context/types';\nimport { onAuthStateChange } from 'utils/firebase';\nimport { GlobalContext } from 'components';\n\n// TODO: mv into src/context/types.ts\nexport const initialUserState: SymptomForm = {\n  symptoms: {\n    fever: { isPresent: false, startDate: null, endDate: null },\n    headache: { isPresent: false, startDate: null, endDate: null },\n    shortnessOfBreath: { isPresent: false, startDate: null, endDate: null },\n    reducedSmell: { isPresent: false, startDate: null, endDate: null },\n    reducedTaste: { isPresent: false, startDate: null, endDate: null },\n    runnyNose: { isPresent: false, startDate: null, endDate: null },\n    wheezing: { isPresent: false, startDate: null, endDate: null },\n    chestPain: { isPresent: false, startDate: null, endDate: null },\n    bodyAche: { isPresent: false, startDate: null, endDate: null },\n    lightHeadedness: { isPresent: false, startDate: null, endDate: null },\n    confusion: { isPresent: false, startDate: null, endDate: null },\n    fatigue: { isPresent: false, startDate: null, endDate: null },\n    soreThroat: { isPresent: false, startDate: null, endDate: null },\n    nausea: { isPresent: false, startDate: null, endDate: null },\n    dryCough: { isPresent: false, startDate: null, endDate: null },\n    wetCough: { isPresent: false, startDate: null, endDate: null },\n    diarrhea: { isPresent: false, startDate: null, endDate: null },\n    abdominalPain: { isPresent: false, startDate: null, endDate: null },\n  },\n  location: null,\n  email: null,\n  birthMonth: null,\n  birthYear: null,\n  address: undefined,\n  city: null,\n  state: null,\n  county: null,\n  country: null,\n  phoneNumber: null,\n  tested: undefined,\n  numTimesTested: null,\n  testedPositive: undefined,\n  seenPhysician: undefined,\n  doctorDiagnosis: undefined,\n  hasAgreedToTerms: false,\n};\n\n// TODO: mv into src/context/reducers.ts\nconst reducer = (\n  state: SymptomForm,\n  action: SubmissionFormAction\n): SymptomForm => {\n  const newForm = { ...state };\n  switch (action.type) {\n    case 'TOGGLE_SYMPTOM':\n      newForm.symptoms[action.payload].isPresent = !state.symptoms[\n        action.payload\n      ].isPresent;\n      return newForm;\n    case 'SET_SYMPTOM_START_DATE':\n      newForm.symptoms[action.payload.symptom].startDate =\n        action.payload.startDate;\n      return newForm;\n    case 'SET_SYMPTOM_END_DATE':\n      newForm.symptoms[action.payload.symptom].endDate = action.payload.endDate;\n      return newForm;\n    case 'SET_NUM_TIMES_TESTED':\n      return { ...state, numTimesTested: action.payload };\n    case 'SET_LOCATION':\n      return { ...state, location: action.payload };\n    case 'SET_ADDRESS':\n      return { ...state, address: action.payload };\n    case 'SET_BIRTH_DATE':\n      return {\n        ...state,\n        birthMonth: action.payload.birthMonth,\n        birthYear: action.payload.birthYear,\n      };\n    case 'SET_TESTED':\n      if (action.payload === false) {\n        return { ...state, testedPositive: undefined, tested: action.payload };\n      }\n      return {\n        ...state,\n        tested: action.payload,\n        numTimesTested: null,\n        seenPhysician: undefined,\n        doctorDiagnosis: undefined,\n      };\n    case 'SET_TESTED_POSITIVE':\n      return { ...state, testedPositive: action.payload };\n    case 'SET_SEEN_PHYSICIAN':\n      return { ...state, seenPhysician: action.payload };\n    case 'SET_DOCTOR_DIAGNOSIS':\n      if (\n        action.payload === 'suspected' ||\n        action.payload === 'inconclusive' ||\n        action.payload === 'negative'\n      ) {\n        return { ...state, doctorDiagnosis: action.payload };\n      }\n      return newForm;\n    case 'TOGGLE_AGREED':\n      return { ...state, hasAgreedToTerms: !state.hasAgreedToTerms };\n    case 'SET_USER_DATA': // e.g. pre-populating symptoms form\n      return {\n        ...action.payload,\n      };\n    case 'SET_ADDRESS_COMPONENTS':\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case 'RESET_SYMPTOMS':\n      return {\n        ...state,\n        symptoms: initialUserState.symptoms,\n      };\n    case 'RESET_USER_DATA':\n      return {\n        ...initialUserState,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const UserContext = createContext<{ state: any; dispatch: any }>({\n  state: null,\n  dispatch: null,\n});\n\nexport type FormProviderType = {\n  children: React.ReactNode;\n};\n\nexport const UserProvider: FC<FormProviderType> = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialUserState);\n  const { dispatch: dispatchGlobal } = useContext(GlobalContext);\n\n  // to avoid rerunning login trigger\n  const [authFlag, setAuthFlag] = useState<boolean>(true);\n\n  const [user] = useAuthState(firebase.auth());\n\n  useEffect(() => {\n    onAuthStateChange(({ loggedIn }: { loggedIn: boolean }) => {\n      if (loggedIn && user && authFlag) {\n        setAuthFlag(false);\n        user.getIdToken().then(token => {\n          getUserData(token)\n            .then((resp: any) => {\n              if (resp.status === 200 && resp.body) {\n                // only set data if data is not empty (ie user has already signed up before)\n                if (resp.body.data) {\n                  dispatch({ type: 'SET_USER_DATA', payload: resp.body.data });\n                }\n              }\n            })\n            .catch(() => {\n              dispatchGlobal({\n                type: 'TOGGLE_UI_ALERT',\n                payload: {\n                  open: true,\n                  message:\n                    'Something went wrong - failed to get user information',\n                  severity: 'error',\n                },\n              });\n            });\n        });\n      }\n    });\n  }, [user, authFlag, dispatchGlobal]);\n\n  return (\n    <UserContext.Provider value={{ state, dispatch }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n","import React, { useEffect, useReducer, createContext, FC } from 'react';\nimport 'date-fns';\n\nimport { bootstrapApp } from 'utils/api';\nimport { StoreActionType, InitialStateType } from 'context/types';\n\nexport const initialState = {\n  activeCountrySymbKey: 'total_confirmed',\n  uiAlert: {\n    open: false,\n    message: '',\n    severity: 'success',\n  },\n  layerVisibility: {\n    selfReported: true,\n    countries: true,\n  },\n  showSplash: false,\n  loginSignupModal: null,\n  hasSeenSplash: !!localStorage.getItem('hasSeenSplash') || false,\n  lastCountriesUpdate: null, // human-friendly timestamp of first country in JHU\n};\n\nconst reducer = (\n  state: InitialStateType,\n  action: StoreActionType\n): InitialStateType => {\n  switch (action.type) {\n    case 'SET_COUNTRY_SYMBOLOGY':\n      return {\n        ...state,\n        activeCountrySymbKey: action.payload,\n      };\n    case 'TOGGLE_LOGIN_SIGNUP_MODAL':\n      return {\n        ...state,\n        loginSignupModal: action.payload,\n      };\n    case 'TOGGLE_UI_ALERT':\n      return {\n        ...state,\n        uiAlert: {\n          ...state.uiAlert,\n          ...action.payload,\n        },\n      };\n    case 'TOGGLE_LAYER_VISIBILITY':\n      return {\n        ...state,\n        layerVisibility: {\n          ...state.layerVisibility,\n          [action.payload]: !state.layerVisibility[action.payload],\n        },\n      };\n    case 'SHOW_SPLASH':\n      if (action.payload === true) {\n        localStorage.setItem('hasSeenSplash', 'true');\n        return {\n          ...state,\n          showSplash: action.payload,\n          hasSeenSplash: true,\n        };\n      }\n      return {\n        ...state,\n        showSplash: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\n// Good article on setting all this up:\n// https://www.simplethread.com/cant-replace-redux-with-hooks/\nexport const GlobalContext = createContext<{ state: any; dispatch: any }>({\n  state: null,\n  dispatch: null,\n});\n\ntype GlobalProviderType = {\n  children: React.ReactNode;\n};\n\nexport const GlobalProvider: FC<GlobalProviderType> = ({ children }) => {\n  // @ts-ignore\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    bootstrapApp();\n  }, []);\n\n  return (\n    <GlobalContext.Provider value={{ state, dispatch }}>\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n","import React, { FC } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Box, Typography, Link, Popover } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  tinyText: {\n    fontSize: '0.85rem',\n  },\n  popover: {\n    maxWidth: 320,\n  },\n}));\n\nexport const AcctReqExplain: FC = () => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <Box marginBottom={1}>\n      <Link\n        aria-label=\"account reason explanation\"\n        aria-haspopup=\"true\"\n        href=\"#\"\n        onClick={handleClick}\n        className={`${classes.tinyText} obvious-link`}\n      >\n        Why do I need to sign up?\n      </Link>{' '}\n      <Popover\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        classes={{ paper: classes.popover }}\n        transformOrigin={{\n          vertical: 'center',\n          horizontal: 'left',\n        }}\n      >\n        <Box onClick={handleClose} padding={2}>\n          <Typography variant=\"h5\">Why do I need to sign up?</Typography>\n          <p>\n            <small className=\"simpler-font\">\n              Please confirm you are human and prevent duplicate data by signing\n              in.\n            </small>\n          </p>\n          <Typography variant=\"h6\">Is my info safe?</Typography>\n          <p>\n            <small className=\"simpler-font\">\n              Your data will remain anonymous and public. Neither Google,\n              Facebook, nor your email provider will receive any data you\n              provide on this website. We use Firebase for secure logins and\n              will never store your password on this website. Read our{' '}\n              <Link\n                href=\"./privacy-policy\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"obvious-link\"\n              >\n                privacy policy\n              </Link>{' '}\n              to learn more.\n            </small>\n          </p>\n          <Box textAlign=\"right\">\n            <Link href=\"#\" onClick={handleClose}>\n              Close\n            </Link>\n          </Box>\n        </Box>\n      </Popover>\n    </Box>\n  );\n};\n","import React, { FC, useState } from 'react';\nimport { Checkbox, FormControlLabel, Link } from '@material-ui/core';\n\n// TODO: break out About stuff into sub-directory\nimport { SimpleModal, AboutSection } from 'components';\n\ntype AgreeToTermsTypes = {\n  hasAgreedToTerms: boolean;\n  dispatchForm: any;\n};\n\nexport const AgreeToTerms: FC<AgreeToTermsTypes> = ({\n  hasAgreedToTerms,\n  dispatchForm,\n}) => {\n  const [showTermsModal, setShowTermsModal] = useState(false);\n\n  return (\n    <>\n      <FormControlLabel\n        control={\n          <Checkbox\n            name=\"checkedB\"\n            color=\"primary\"\n            data-cy=\"has-agreed-to-terms\"\n            checked={!!hasAgreedToTerms}\n            onChange={() => {\n              dispatchForm({ type: 'TOGGLE_AGREED' });\n            }}\n          />\n        }\n        label={\n          <span>\n            I agree to the{' '}\n            <Link\n              className=\"obvious-link\"\n              href=\"#\"\n              onClick={(e: React.MouseEvent) => {\n                e.preventDefault();\n                setShowTermsModal(true);\n              }}\n            >\n              terms of service\n            </Link>\n            .\n          </span>\n        }\n      />\n      {showTermsModal && (\n        <SimpleModal\n          title=\"Terms of service\"\n          onClose={() => {\n            setShowTermsModal(false);\n            return null;\n          }}\n        >\n          <AboutSection width=\"100%\" filename=\"terms-of-service.html\" />\n        </SimpleModal>\n      )}\n    </>\n  );\n};\n","import React, { FC, useEffect, useContext, useState, useReducer } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  Grid,\n  TextField,\n  InputAdornment,\n  CircularProgress,\n  Button,\n} from '@material-ui/core';\nimport { AccountCircle, Email, Https } from '@material-ui/icons';\n\nimport firebase from 'config/firebase';\nimport { signUp } from 'utils/firebase';\nimport { GlobalContext } from 'context';\nimport { emailSignupFormInitialState, formReducer } from 'components/signup';\n\ndeclare global {\n  interface Window {\n    recaptchaVerifier: any;\n  }\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  marginTop: {\n    marginTop: theme.spacing(1),\n  },\n}));\n\ntype EmailSignupFieldsType = {\n  handleSignupError: (code: string, message: string) => void;\n  handleSignupSuccess: () => void;\n};\n\nexport const EmailSignupFields: FC<EmailSignupFieldsType> = ({\n  handleSignupError,\n  handleSignupSuccess,\n}) => {\n  const classes = useStyles();\n  const [captchaVerified, setCaptchaVerified] = useState(false);\n  const [submitting, setSubmitting] = useState<boolean>(false);\n  const { dispatch: dispatchGlobal } = useContext(GlobalContext);\n  const [formState, dispatchForm] = useReducer(\n    formReducer,\n    emailSignupFormInitialState\n  );\n\n  const setFormValue = (field: string, value: string) => {\n    dispatchForm({ type: 'SET_FIELD', payload: { field, value } });\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormValue(e.currentTarget.name, e.currentTarget.value);\n  };\n\n  // Basic form validation for email fields\n  const handleEmailSignup = async () => {\n    dispatchForm({ type: 'RESET_FORM_ERRORS' });\n\n    if (formState.password.length < 6) {\n      setFormValue(\n        'passwordError',\n        'Password must be at least 6 characters long'\n      );\n    } else if (formState.password2.length < 6) {\n      setFormValue(\n        'passwordError2',\n        'Password must be at least 6 characters long'\n      );\n    } else if (formState.password !== formState.password2) {\n      setFormValue('passwordError2', 'Passwords do not match');\n    } else {\n      try {\n        setSubmitting(true);\n        await signUp(formState.email, formState.password, formState.captcha);\n        handleSignupSuccess();\n      } catch (err) {\n        setSubmitting(false);\n        handleSignupError(err.code, err.message);\n      }\n    }\n  };\n\n  useEffect(() => {\n    try {\n      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\n        'recaptcha',\n        {\n          callback: (response: any) => {\n            setFormValue('captcha', response);\n            setCaptchaVerified(true);\n          },\n          'expired-callback': () => {\n            window.recaptchaVerifier.clear();\n            // Response expired. Needs to rerender captcha\n          },\n        }\n      );\n      window.recaptchaVerifier.render();\n    } catch (err) {\n      dispatchGlobal({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Something went wrong. Could not load captcha.',\n          severity: 'error',\n        },\n      });\n    }\n  }, [dispatchGlobal]);\n\n  return (\n    <>\n      <div\n        id=\"recaptcha\"\n        style={{ display: !captchaVerified ? 'inline-block' : 'none' }}\n      />\n      <div style={{ display: !captchaVerified ? 'none' : 'block' }}>\n        <Grid\n          container\n          spacing={2}\n          className={classes.marginTop}\n          justify=\"center\"\n        >\n          <Grid item xs={12} sm={6}>\n            <TextField\n              id=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              name=\"email\"\n              data-cy=\"register-email-field\"\n              value={formState.email}\n              onChange={handleChange}\n              error={!!formState.emailError}\n              helperText={formState.emailError}\n              fullWidth\n              required\n              variant=\"outlined\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <AccountCircle />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n        </Grid>\n        <Grid\n          container\n          spacing={2}\n          className={classes.marginTop}\n          justify=\"center\"\n        >\n          <Grid item xs={6} sm={3}>\n            <TextField\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              data-cy=\"register-password-field\"\n              value={formState.password}\n              onChange={handleChange}\n              fullWidth\n              required\n              error={!!formState.passwordError}\n              helperText={formState.passwordError}\n              variant=\"outlined\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Https />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n          <Grid item xs={6} sm={3}>\n            <TextField\n              id=\"password2\"\n              label=\"Confirm Password\"\n              type=\"password\"\n              name=\"password2\"\n              data-cy=\"register-password2-field\"\n              value={formState.password2}\n              onChange={handleChange}\n              fullWidth\n              required\n              error={!!formState.passwordError2}\n              helperText={formState.passwordError2}\n              variant=\"outlined\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Https />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} sm={8}>\n            <Button\n              variant=\"contained\"\n              data-cy={'register-email'}\n              color=\"secondary\"\n              disabled={!captchaVerified || submitting}\n              startIcon={<Email />}\n              onClick={handleEmailSignup}\n            >\n              {!submitting ? (\n                'Sign up with email'\n              ) : (\n                <CircularProgress size={28} />\n              )}\n            </Button>\n          </Grid>\n        </Grid>\n      </div>\n    </>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { Link } from '@material-ui/core';\n\nimport { GlobalContext } from 'context';\n\nexport const SignInLink: FC = () => {\n  const { dispatch } = useContext(GlobalContext);\n\n  return (\n    <Link\n      href=\"#\"\n      className=\"obvious-link\"\n      onClick={(e: React.MouseEvent) => {\n        e.preventDefault();\n\n        dispatch({\n          type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n          payload: 'login',\n        });\n      }}\n    >\n      Sign in\n    </Link>\n  );\n};\n","import React, { FC, useReducer, useContext } from 'react';\nimport { IfFirebaseUnAuthed } from '@react-firebase/auth';\nimport { Grid, Typography } from '@material-ui/core';\n\nimport { isValidUserAgent } from 'utils';\nimport { googleLogin, facebookLogin } from 'utils/firebase';\nimport { GlobalContext } from 'components';\nimport { UserContext } from 'context';\nimport { initialFormStateType, actionType } from 'components/signup/types';\nimport {\n  EmailSignupFields,\n  AgreeToTerms,\n  AcctReqExplain,\n  SignupLoginBtn,\n  SignInLink,\n} from 'components/signup';\n\ndeclare global {\n  interface Window {\n    recaptchaVerifier: any;\n  }\n}\n\nexport const emailSignupFormInitialState = {\n  email: '',\n  password: '',\n  password2: '',\n  emailError: '',\n  passwordError: '',\n  passwordError2: '',\n  captcha: '',\n};\n\nexport const formReducer = (\n  state: initialFormStateType,\n  action: actionType\n) => {\n  switch (action.type) {\n    case 'SET_FIELD':\n      if (action.payload) {\n        return {\n          ...state,\n          [action.payload.field]: action.payload.value,\n        };\n      }\n      return {\n        ...state,\n      };\n    case 'RESET_FORM_ERRORS':\n      return {\n        ...state,\n        emailError: '',\n        passwordError: '',\n        passwordError2: '',\n      };\n    default:\n      return { ...state };\n  }\n};\n\nwindow.recaptchaVerifier = window.recaptchaVerifier || {};\n\nexport const SignupForm: FC = () => {\n  const { dispatch } = useContext(GlobalContext);\n  const isLegitBrowser = isValidUserAgent();\n  const [, registrationFormDispatch] = useReducer(\n    formReducer,\n    emailSignupFormInitialState\n  );\n  const {\n    state: symptomsFormState,\n    dispatch: symptomsFormDispatch,\n  } = useContext(UserContext);\n\n  const setFormValue = (field: string, value: string) => {\n    registrationFormDispatch({ type: 'SET_FIELD', payload: { field, value } });\n  };\n\n  const handleSignupError = (code: string, message: string) => {\n    switch (message) {\n      case 'auth/email-already-in-use':\n        setFormValue('emailError', 'That email is already in use');\n        break;\n      case 'auth/invalid-email':\n        setFormValue('emailError', 'Invalid email');\n        break;\n      default:\n        dispatch({\n          type: 'TOGGLE_UI_ALERT',\n          payload: {\n            open: true,\n            message,\n            severity: 'error',\n            duration: 15000,\n          },\n        });\n        break;\n    }\n  };\n\n  // Generic success handler to show user success alert and close modal\n  const handleSignupSuccess = () => {\n    dispatch({\n      type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n      payload: null,\n    });\n\n    dispatch({\n      type: 'TOGGLE_UI_ALERT',\n      payload: {\n        open: true,\n        message: 'Signup successful!',\n        severity: 'success',\n      },\n    });\n  };\n\n  // Technically signup OR login\n  const handleGoogleLogin = async (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    try {\n      await googleLogin();\n      handleSignupSuccess();\n    } catch (err) {\n      handleSignupError(err.code, err.message);\n    }\n  };\n\n  // Technically signup OR login\n  const handleFacebookLogin = async (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    try {\n      await facebookLogin();\n      handleSignupSuccess();\n    } catch (err) {\n      handleSignupError(err.code, err.message);\n    }\n  };\n\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <IfFirebaseUnAuthed>\n        {() => (\n          <>\n            <Typography variant=\"h4\">Choose a signup method</Typography>\n            <AcctReqExplain />\n            {!symptomsFormState.hasAgreedToTerms && (\n              <Grid container>\n                <Grid item xs={12}>\n                  <AgreeToTerms\n                    hasAgreedToTerms={symptomsFormState.hasAgreedToTerms}\n                    dispatchForm={symptomsFormDispatch}\n                  />\n                </Grid>\n              </Grid>\n            )}\n            {symptomsFormState.hasAgreedToTerms && (\n              <>\n                <Grid\n                  container\n                  justify=\"center\"\n                  style={{ marginTop: 16 }}\n                  spacing={1}\n                >\n                  <Grid item>\n                    <SignupLoginBtn\n                      type=\"google\"\n                      onClick={handleGoogleLogin}\n                      disabled={!isLegitBrowser}\n                    />\n                  </Grid>\n                  <Grid item>\n                    <SignupLoginBtn\n                      type=\"facebook\"\n                      onClick={handleFacebookLogin}\n                      disabled={!isLegitBrowser}\n                    />\n                  </Grid>\n                  {!isLegitBrowser && (\n                    <Grid\n                      item\n                      xs={11}\n                      className=\"simpler-font\"\n                      style={{ fontSize: '0.6rem' }}\n                    >\n                      To sign up using Facebook or Google, please open this site\n                      in a web browser such as Safari or Chrome.\n                    </Grid>\n                  )}\n                </Grid>\n                <Typography component=\"div\">\n                  <p>OR, sign up with email:</p>\n                </Typography>\n                <EmailSignupFields\n                  handleSignupError={handleSignupError}\n                  handleSignupSuccess={handleSignupSuccess}\n                />\n              </>\n            )}\n            <p style={{ textAlign: 'center' }}>\n              Already have an account? <SignInLink /> .\n            </p>\n          </>\n        )}\n      </IfFirebaseUnAuthed>\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport { Button } from '@material-ui/core';\nimport { Facebook, Email } from '@material-ui/icons';\n\n// TODO: use this for goog/fb click handlers\n// type ClickForPromise = (\n//   event: React.MouseEvent<Element, MouseEvent>\n// ) => Promise<void>;\n\ntype SignupProviderTypes = 'email' | 'facebook' | 'google';\n\ntype SignupLoginBtnConfig = {\n  type: SignupProviderTypes;\n  disabled?: boolean;\n  textOverride?: string; // e.g. \"Log in with email\" instead of just \"Email\"\n  onClick: (event: any) => void; // TODO: do it right with React.SyntheticEvent\n};\n\nconst GoogleIcon: FC = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 210 210\"\n    className=\"MuiSvgIcon-root\"\n  >\n    <path d=\"M0 105a105.1 105.1 0 01169-83.2l-24.4 31.7a65 65 0 1022.2 71.5H105V85h105v20a105.1 105.1 0 01-210 0z\" />\n  </svg>\n);\n\nexport const SignupLoginBtn: FC<SignupLoginBtnConfig> = ({\n  type,\n  disabled,\n  onClick,\n  textOverride,\n}) => {\n  let btnText = '';\n  let startIcon = null;\n  let cypressDataAttrib = '';\n\n  switch (type) {\n    case 'google':\n      btnText = 'Google';\n      startIcon = <GoogleIcon />;\n      break;\n    case 'facebook':\n      btnText = 'Facebook';\n      startIcon = <Facebook />;\n      break;\n    default:\n      btnText = 'Email';\n      startIcon = <Email />;\n      cypressDataAttrib = 'register-email';\n      break;\n  }\n\n  return (\n    <Button\n      variant=\"contained\"\n      data-cy={cypressDataAttrib}\n      color=\"secondary\"\n      disabled={disabled}\n      startIcon={startIcon}\n      onClick={onClick}\n    >\n      {textOverride || btnText}\n    </Button>\n  );\n};\n","import React, { FC, useState, useContext } from 'react';\nimport {\n  Grid,\n  TextField,\n  Button,\n  Typography,\n  InputAdornment,\n  Link,\n  CircularProgress,\n} from '@material-ui/core';\nimport { AccountCircle, Https, Email } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { isValidUserAgent } from 'utils';\nimport { googleLogin, login, facebookLogin } from 'utils/firebase';\nimport { GlobalContext } from 'context';\nimport { SimpleModal, VerifyEmailForm } from 'components';\nimport { SignupLoginBtn } from 'components/signup';\n\nconst useStyles = makeStyles(theme => ({\n  marginTop: {\n    marginTop: theme.spacing(1),\n  },\n}));\n\nexport const LoginForm: FC = () => {\n  const classes = useStyles();\n  const { dispatch } = useContext(GlobalContext);\n  const isLegitBrowser = isValidUserAgent();\n\n  const [showForgotPasswd, setShowForgotPasswd] = useState<boolean>(false);\n  const [email, setEmail] = useState<string>('');\n  const [emailErrorMessage, setEmailErrorMessage] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState<string>('');\n  const [submitting, setSubmitting] = useState<boolean>(false);\n\n  const handleLoginError = (code: string, message: string) => {\n    switch (code) {\n      case 'auth/wrong-password':\n        setPasswordErrorMessage('Invalid password');\n        break;\n      case 'auth/user-not-found':\n        setEmailErrorMessage('That username does not exist');\n        break;\n      case 'auth/invalid-email':\n        setEmailErrorMessage('Invalid email');\n        break;\n      default:\n        dispatch({\n          type: 'TOGGLE_UI_ALERT',\n          payload: {\n            open: true,\n            message,\n            severity: 'error',\n            // I think this is a MUI bug that resets the autoHide timer under\n            // certain circumstances\n            duration: 15000, // it's not actually 15 seconds, more like 6 or 7\n          },\n        });\n        break;\n    }\n  };\n\n  // Generic success handler to show user success alert and close modal\n  const handleLoginSuccess = () => {\n    dispatch({\n      type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n      payload: null,\n    });\n\n    dispatch({\n      type: 'TOGGLE_UI_ALERT',\n      payload: {\n        open: true,\n        message: 'Login successful!',\n        severity: 'success',\n      },\n    });\n  };\n\n  const resetErrors = () => {\n    setEmailErrorMessage('');\n    setPasswordErrorMessage('');\n  };\n\n  const handleEmailLogin = async (event: React.MouseEvent) => {\n    event.preventDefault();\n    resetErrors();\n\n    try {\n      setSubmitting(true);\n      await login(email, password);\n      handleLoginSuccess();\n    } catch (err) {\n      setSubmitting(false);\n      handleLoginError(err.code, err.message);\n    }\n  };\n\n  const handleGoogleLogin = async (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    try {\n      await googleLogin();\n      handleLoginSuccess();\n    } catch (err) {\n      handleLoginError(err.code, err.message);\n    }\n  };\n\n  const handleFacebookLogin = async (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    try {\n      await facebookLogin();\n      handleLoginSuccess();\n    } catch (err) {\n      handleLoginError(err.code, err.message);\n    }\n  };\n\n  const handleEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(event.currentTarget.value);\n  };\n\n  const handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(event.currentTarget.value);\n  };\n\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <Typography variant=\"h4\">Choose a login method</Typography>\n      <Grid\n        container\n        spacing={2}\n        justify=\"center\"\n        className={classes.marginTop}\n      >\n        <Grid item>\n          <SignupLoginBtn\n            disabled={!isLegitBrowser}\n            type=\"google\"\n            onClick={handleGoogleLogin}\n          />\n        </Grid>\n        <Grid item>\n          <SignupLoginBtn\n            disabled={!isLegitBrowser}\n            type=\"facebook\"\n            onClick={handleFacebookLogin}\n          />\n        </Grid>\n        {!isLegitBrowser && (\n          <Grid\n            item\n            xs={11}\n            className=\"simpler-font\"\n            style={{ fontSize: '0.6rem' }}\n          >\n            To log in using Facebook or Google, please open this site in a web\n            browser such as Safari or Chrome.\n          </Grid>\n        )}\n      </Grid>\n      <Typography component=\"div\" className={classes.marginTop}>\n        <p className={classes.marginTop}>OR, log in with email:</p>\n      </Typography>\n      <Grid container justify=\"center\">\n        <Grid item xs={12} sm={10}>\n          <TextField\n            id=\"username\"\n            label=\"Username\"\n            type=\"email\"\n            value={email}\n            onChange={handleEmailChange}\n            error={!!emailErrorMessage}\n            helperText={emailErrorMessage}\n            fullWidth\n            required\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <AccountCircle />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify=\"center\">\n        <Grid item xs={12} sm={10} className={classes.marginTop}>\n          <TextField\n            id=\"username\"\n            label=\"Password\"\n            type=\"password\"\n            value={password}\n            onChange={handlePasswordChange}\n            error={!!passwordErrorMessage}\n            helperText={passwordErrorMessage}\n            fullWidth\n            required\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Https />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n      </Grid>\n      <Grid container spacing={2} justify=\"center\">\n        <Grid item xs={12} sm={10}>\n          <Link\n            href=\"#\"\n            className=\"obvious-link\"\n            onClick={(e: React.MouseEvent) => {\n              e.preventDefault();\n              setShowForgotPasswd(true);\n              return null;\n            }}\n          >\n            Forgot password?\n          </Link>\n        </Grid>\n      </Grid>\n      <Grid\n        container\n        justify=\"center\"\n        className={classes.marginTop}\n        spacing={1}\n        style={{ textAlign: 'center' }}\n      >\n        <Grid item xs={12} sm=\"auto\">\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={handleEmailLogin}\n            startIcon={<Email />}\n            disabled={!email || !password || submitting}\n          >\n            {!submitting ? 'Log in with email' : <CircularProgress size={28} />}\n          </Button>\n        </Grid>\n      </Grid>\n      <p>\n        Don't have an account?{' '}\n        <Link\n          href=\"#\"\n          className=\"obvious-link\"\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n\n            dispatch({\n              type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n              payload: 'signup',\n            });\n          }}\n        >\n          Sign up\n        </Link>\n        .\n      </p>\n      {showForgotPasswd && (\n        <SimpleModal\n          title=\"Forgot password\"\n          onClose={() => {\n            setShowForgotPasswd(false);\n            return null;\n          }}\n        >\n          <VerifyEmailForm />\n        </SimpleModal>\n      )}\n    </div>\n  );\n};\n","import React, { useContext, FC } from 'react';\n\nimport { GlobalContext, SimpleModal } from 'components';\nimport { LoginForm } from 'components/LoginForm';\nimport { SignupForm } from 'components/signup';\n\nexport const LoginSignup: FC = () => {\n  const { state, dispatch } = useContext(GlobalContext);\n  const modalView = state.loginSignupModal;\n\n  const onClose = () => {\n    dispatch({\n      type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n      payload: null,\n    });\n  };\n\n  if (!modalView) {\n    return null;\n  }\n\n  if (modalView === 'login') {\n    return (\n      <SimpleModal onClose={onClose} title=\"Login\">\n        <LoginForm />\n      </SimpleModal>\n    );\n  }\n\n  return (\n    <SimpleModal onClose={onClose} title=\"Signup\">\n      <SignupForm />\n    </SimpleModal>\n  );\n};\n","import React, { FC } from 'react';\nimport { Typography } from '@material-ui/core';\n\nimport { CountryTable, AboutSection } from 'components';\n\nexport const List: FC = () => {\n  return (\n    <div>\n      <Typography variant=\"h2\">Results by Country</Typography>\n      <CountryTable />\n      <AboutSection filename=\"data-license.html\" />\n    </div>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { Container, Button } from '@material-ui/core';\n\nimport { triggerBadRequest, fetchGithubHtml } from 'utils/api';\nimport { Breadcrumb, GlobalContext } from 'components';\n\nconst ErrorTriggerBtns: FC = () => {\n  const { dispatch } = useContext(GlobalContext);\n\n  const handleBSurlClick = async () => {\n    try {\n      await triggerBadRequest();\n    } catch {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Oops! Something went wrong',\n          severity: 'error',\n        },\n      });\n    }\n  };\n\n  const handleBadHelpClick = async () => {\n    try {\n      await fetchGithubHtml('not-real.html');\n    } catch (err) {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Something went wrong. Could not get content.',\n          severity: 'error',\n        },\n      });\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={handleBadHelpClick}\n      >\n        Trigger Bad About\n      </Button>\n      <Button color=\"secondary\" variant=\"contained\" onClick={handleBSurlClick}>\n        Trigger BS URL\n      </Button>\n    </div>\n  );\n};\n\nexport const SecretSnackground: FC = () => (\n  <Container className=\"simpler-font\">\n    <Breadcrumb to=\"/\" text=\"< Home\" />\n    <h1>Super-secret Snackground</h1>\n    <p>\n      Easy way to test error/warning/success snackbars/alerts directly without a\n      million steps.\n    </p>\n    <ErrorTriggerBtns />\n  </Container>\n);\n","import { queryCache } from 'react-query';\n\nimport { BACKEND_URL, CLOUD_HTML_BASE_URL } from 'config';\nimport { SymptomForm } from 'context/types';\nimport { CountryRow } from 'types';\nimport { IGeoJson } from 'components/map/types';\nimport { htmlPages } from 'views';\n\nconst superagent = require('superagent');\n\nexport const postFormData = async (\n  formData: SymptomForm,\n  authorization: string\n) => {\n  await superagent\n    .post(`${BACKEND_URL}/self_report`)\n    .set('Authorization', authorization)\n    .send(formData);\n};\n\nexport const getUserData = (authorization: string) => {\n  return superagent\n    .get(`${BACKEND_URL}/user`)\n    .set('Authorization', authorization)\n    .set('Accept', 'application/json');\n};\n\n// TODO: switch to topojson or vector tiles for some perf gains\nexport const getGeoJSONCountries = async () =>\n  await require('data/countries.min.json');\n\nexport const getCountryData = async () => {\n  return superagent\n    .get(`${BACKEND_URL}/countries`)\n    .set('Accept', 'application/json');\n};\n\nexport const getCountryGeoJSONData = async () => {\n  const geoJSON = await getGeoJSONCountries();\n  const countryData = await getCountryData();\n  // not sure why this returns text and not json\n  const countries = JSON.parse(countryData['text'])['data'];\n  const propertiesHash: { [key: string]: Object } = {};\n\n  // make a hash to avoid big O^2\n  countries['countries'].forEach((country: CountryRow) => {\n    propertiesHash[country['country_code']] = { ...country };\n  });\n\n  const geoJSONCountries = geoJSON['features'].map((feature: IGeoJson) => {\n    if (\n      feature['properties']['ISO_A2'] !== undefined &&\n      feature['properties']['ISO_A2'] in propertiesHash\n    ) {\n      return {\n        ...feature,\n        properties: propertiesHash[feature['properties']['ISO_A2']],\n      };\n    }\n    return { ...feature };\n  });\n\n  return geoJSONCountries;\n};\n\nexport const getSubmittedCases = async () => {\n  return await superagent\n    .get(`${BACKEND_URL}/self_report`)\n    .set('Accept', 'application/json')\n    .then((response: any) => response.body.data.locations);\n};\n\n// TODO: these if they're going to be a thing\n// export const getStateData\n// export const getCountyData\n\nexport const fetchGithubHtml = async (filename: string) =>\n  await superagent\n    .get(`${CLOUD_HTML_BASE_URL}/${filename}`)\n    .set('Accept', 'text/html; charset=utf8');\n\nexport const triggerBadRequest = async () =>\n  await superagent.get('http://superfake.biz/400');\n\nexport const bootstrapApp = async () => {\n  await prefetchAboutData();\n};\n\nconst prefetchAboutData = async () => {\n  htmlPages.forEach(async page => {\n    await queryCache.prefetchQuery(page, fetchGithubHtml, {\n      staleTime: Infinity,\n    });\n  });\n};\n","import { useQuery } from 'react-query';\n\nimport {\n  getCountryGeoJSONData,\n  getSubmittedCases,\n  fetchGithubHtml,\n} from 'utils/api';\n\nconst FIVE_MINUTES = 300000;\n\nexport const useCountryTotals = (dispatch: any) =>\n  useQuery('countryTotals', getCountryGeoJSONData, {\n    staleTime: FIVE_MINUTES,\n    onError: error => {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Could not get country totals',\n          severity: 'error',\n        },\n      });\n    },\n  });\n\nexport const useSubmitted = (dispatch: any) =>\n  useQuery('submitted', getSubmittedCases, {\n    staleTime: FIVE_MINUTES,\n    onError: error => {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Could not get self-reported dataset',\n          severity: 'error',\n        },\n      });\n    },\n  });\n\nexport const useAbout = (filename: string, dispatch: any) =>\n  useQuery(filename, fetchGithubHtml, {\n    staleTime: Infinity,\n    onError: error => {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: true,\n          message: 'Something went wrong. Could not get content.',\n          severity: 'error',\n        },\n      });\n    },\n  });\n","import React, { FC, useContext } from 'react';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { Container, Link, Typography } from '@material-ui/core';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { useAbout } from 'utils/queries';\nimport { GlobalContext } from 'components';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n    backgroundColor: theme.palette.common.white,\n    color: theme.palette.common.black,\n    '& a': {\n      color: theme.palette.info.main,\n    },\n    '& a:hover': {\n      cursor: 'pointer',\n    },\n  },\n}));\n\ninterface AboutContTypes {\n  children: React.ReactNode;\n}\n\ninterface AboutType {\n  filename: string;\n  width?: string;\n}\n\ninterface BreadcrumbType {\n  text: string;\n  to: string;\n}\n\n// Jumping-off/lead paragraphs to feedback, service terms, and privacy policy\nexport const AboutFooter: FC = () => (\n  <section>\n    <h2 id=\"feedback\">Feedback</h2>\n    <p>\n      Please contact us by filling out\n      <a\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        href=\"https://docs.google.com/forms/d/e/1FAIpQLSfkQJMihQUlA6scYvjr1A1OZiXGRRxQLkD1YIiklGDq5YTclQ/viewform?usp=sf_link\"\n      >\n        this short form\n      </a>\n      .\n    </p>\n    <h2 id=\"terms-of-service\">Terms of Service</h2>\n    <p>\n      Read about our{' '}\n      <RouteLink to=\"/terms-of-service\">terms of service</RouteLink>.\n    </p>\n    <h2 id=\"privacy-policy\">Privacy Policy</h2>\n    <p>\n      Read more about{' '}\n      <RouteLink to=\"/privacy-policy\">how we use your data</RouteLink>.\n    </p>\n  </section>\n);\n\nexport const AboutSection: FC<AboutType> = ({ filename, width = '100%' }) => {\n  const { dispatch } = useContext(GlobalContext);\n  const { data } = useAbout(filename, dispatch);\n\n  return (\n    <div style={{ width }}>\n      {data && <div dangerouslySetInnerHTML={{ __html: data.text }} />}\n    </div>\n  );\n};\n\nexport const AboutContainer: FC<AboutContTypes> = ({ children }) => {\n  const classes = useStyles();\n\n  return (\n    <Container className={`simpler-font ${classes.root}`}>{children}</Container>\n  );\n};\n\nexport const Breadcrumb: FC<BreadcrumbType> = ({ text, to }) => (\n  <>\n    {to !== '/' && (\n      <Typography component=\"span\" color=\"primary\">\n        <small>{` < `}</small>\n      </Typography>\n    )}\n    <Link component={RouteLink} to={to}>\n      {text}\n    </Link>\n  </>\n);\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport Fab from '@material-ui/core/Fab';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Zoom from '@material-ui/core/Zoom';\n\ninterface Props {\n  children: React.ReactElement;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nfunction ScrollTop(props: Props) {\n  const { children } = props;\n  const classes = useStyles();\n  const trigger = useScrollTrigger();\n\n  const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    const anchor = (\n      (event.target as HTMLDivElement).ownerDocument || document\n    ).querySelector('#back-to-top-anchor');\n\n    if (anchor) {\n      anchor.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  };\n\n  return (\n    <Zoom in={trigger}>\n      <div onClick={handleClick} role=\"presentation\" className={classes.root}>\n        {children}\n      </div>\n    </Zoom>\n  );\n}\n\n// CRED: https://material-ui.com/components/app-bar/#back-to-top\nexport const BackToTopBtn = () => (\n  <ScrollTop>\n    <Fab color=\"secondary\" size=\"small\" aria-label=\"scroll back to top\">\n      <KeyboardArrowUpIcon />\n    </Fab>\n  </ScrollTop>\n);\n","import React, { FC, useContext } from 'react';\nimport MUIDataTable from 'mui-datatables';\n\nimport { GlobalContext } from 'context';\nimport { useCountryTotals } from 'utils/queries';\n\nexport const CountryTable: FC = () => {\n  const { dispatch } = useContext(GlobalContext);\n  const { status, data: countries } = useCountryTotals(dispatch);\n\n  if (status !== 'success' || !countries) {\n    return <></>;\n  }\n\n  const data = countries\n    .map((country: any) => {\n      const {\n        country_name,\n        total_deaths,\n        total_confirmed,\n        total_recovered,\n        new_deaths,\n        new_confirmed,\n        new_recovered,\n      } = country.properties;\n\n      return [\n        country_name,\n        total_confirmed,\n        new_confirmed,\n        total_deaths,\n        new_deaths,\n        total_recovered,\n        new_recovered,\n      ];\n    })\n    // get rid of countries with no name\n    .filter((country: Array<any>) => !!country[0]);\n\n  const columns = [\n    { name: 'Country ' },\n    {\n      name: 'Confirmed',\n      options: {\n        sortDirection: 'desc' as 'asc' | 'desc' | 'none' | undefined,\n      },\n    },\n    { name: 'Confirmed (Day Change)' },\n    { name: 'Deaths ' },\n    { name: 'Deaths (Day Change) ' },\n    { name: 'Recovered ' },\n    { name: 'Recovered (Day Change) ' },\n  ];\n\n  return (\n    <MUIDataTable\n      title=\"Country Data\"\n      data={data}\n      columns={columns}\n      options={{\n        selectableRows: 'none',\n      }}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { IconButton } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport { NavBarTypes, MuiClassList } from 'types/top-bar';\n\ntype BurgerTypes = Omit<NavBarTypes, 'isHome'> & MuiClassList;\n\nexport const Burger: FC<BurgerTypes> = ({\n  toggleDrawerOpen,\n  drawerOpen,\n  classes = {},\n}) => (\n  <IconButton\n    edge=\"start\"\n    className={classes.burger}\n    aria-label=\"menu\"\n    onClick={() => toggleDrawerOpen(!drawerOpen)}\n  >\n    <MenuIcon />\n  </IconButton>\n);\n","import React, { FC, useContext } from 'react';\nimport { Button, IconButton } from '@material-ui/core';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\n\nimport { MuiClassList } from 'types/top-bar';\nimport { GlobalContext } from 'components';\n\nconst LoginSignupBtnDesktop: FC<MuiClassList> = ({ classes }) => {\n  const { dispatch } = useContext(GlobalContext);\n\n  return (\n    <IconButton\n      aria-label=\"login-or-signup\"\n      className={classes.signupLoginMobile}\n      color=\"primary\"\n      size=\"small\"\n      onClick={() => {\n        dispatch({\n          type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n          payload: 'login',\n        });\n      }}\n    >\n      <PersonOutlineIcon fontSize=\"inherit\" htmlColor=\"white\" />\n    </IconButton>\n  );\n};\n\nconst LoginSignupBtnMobile: FC<MuiClassList> = ({ classes }) => {\n  const { dispatch } = useContext(GlobalContext);\n\n  return (\n    <Button\n      variant=\"contained\"\n      color=\"primary\"\n      className={`${classes.appBarBtns} ${classes.signupLoginBtn} ${classes.snugBtnMobile}`}\n      onClick={() => {\n        dispatch({\n          type: 'TOGGLE_LOGIN_SIGNUP_MODAL',\n          payload: 'login',\n        });\n      }}\n    >\n      Login / Signup\n    </Button>\n  );\n};\n\nexport const LoginSignupBtn: FC<MuiClassList> = ({ classes }) => (\n  <>\n    <LoginSignupBtnDesktop classes={classes} />\n    <LoginSignupBtnMobile classes={classes} />\n  </>\n);\n","import React, { FC } from 'react';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { Button } from '@material-ui/core';\n\nimport { MuiClassList } from 'types/top-bar';\n\nexport const MySymptomsBtn: FC<MuiClassList> = ({ classes }) => (\n  <Button\n    variant=\"contained\"\n    color=\"secondary\"\n    to=\"/self-report\"\n    className={`${classes.appBarBtns} ${classes.snugBtnMobile}`}\n    component={RouteLink}\n  >\n    My Case\n  </Button>\n);\n","import React, { FC } from 'react';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { Typography } from '@material-ui/core';\n\nimport { MuiClassList } from 'types/top-bar';\n\nexport const TitleWrap: FC<MuiClassList> = ({ classes }) => (\n  <Typography\n    to=\"/\"\n    component={RouteLink}\n    className={`${classes.title} MuiTypography-noWrap`}\n  >\n    <span className=\"MuiTypography-noWrap\" style={{ lineHeight: 1 }}>\n      Covid-19 Self-reporting Tool\n    </span>\n    <Typography\n      component=\"p\"\n      variant=\"subtitle2\"\n      noWrap\n      className={classes.subTitle}\n    >\n      An open data tool that tracks self-reported and confirmed infections\n    </Typography>\n  </Typography>\n);\n","import React, { FC } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  AppBar,\n  Box,\n  Toolbar,\n  useScrollTrigger,\n  Slide,\n} from '@material-ui/core';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { IfFirebaseAuthed, IfFirebaseUnAuthed } from '@react-firebase/auth';\n\nimport firebase from 'config/firebase';\nimport { NavBarTypes, MuiClassList } from 'types/top-bar';\nimport { UserPopoverMenu } from 'components/top-bar';\nimport {\n  TitleWrap,\n  Burger,\n  MySymptomsBtn,\n  LoginSignupBtn,\n} from 'components/top-bar';\n\nconst TopBarBtns: FC<MuiClassList> = ({ classes }) => (\n  <>\n    <MySymptomsBtn classes={classes} />\n    <IfFirebaseUnAuthed>\n      {() => <LoginSignupBtn classes={classes} />}\n    </IfFirebaseUnAuthed>\n    <IfFirebaseAuthed>{() => <UserPopoverMenu />}</IfFirebaseAuthed>\n  </>\n);\n\nconst useStyles = (isHome: boolean) => {\n  const topBarStyles = makeStyles(theme => ({\n    root: {\n      backgroundColor: isHome ? 'transparent' : theme.palette.grey[800],\n      // backgroundColor: 'hsla(0, 0%, 20%, 0.4)', // TODO: give er a go\n      boxShadow: 'none',\n      color: theme.palette.common.white,\n      paddingTop: theme.spacing(1),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: 6,\n      paddingRight: 6,\n      zIndex: theme.zIndex.drawer + 1,\n      [theme.breakpoints.up('md')]: {\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n        paddingTop: theme.spacing(3),\n        paddingBottom: theme.spacing(3),\n      },\n    },\n    toolbar: {\n      justifyContent: 'space-between',\n    },\n    title: {\n      color: 'inherit',\n      justifyContent: 'center',\n      marginRight: 'auto', // forces it to the beginning in flexbox\n      paddingRight: 5,\n      paddingTop: 3,\n      position: 'relative',\n      textAlign: 'left',\n      textDecoration: 'none',\n      textShadow: '1px 1px 3px hsla(180, 2%, 10%, 0.75)',\n      fontSize: '1.5rem',\n      lineHeight: 1,\n      // So gross but there's just no room on super small screens 😔\n      [theme.breakpoints.down(321)]: {\n        fontSize: '1.2rem',\n        maxWidth: 200,\n      },\n      [theme.breakpoints.up('sm')]: {\n        fontSize: '2rem',\n      },\n      [theme.breakpoints.up('md')]: {\n        fontSize: '2.5rem',\n      },\n    },\n    titleAndBadge: {\n      position: 'relative',\n      display: 'flex',\n      flexWrap: 'nowrap',\n      flex: 1,\n      [theme.breakpoints.up('md')]: {\n        marginLeft: 105,\n      },\n      [theme.breakpoints.up('lg')]: {\n        marginLeft: 150,\n      },\n    },\n    // Hamburger\n    burger: {\n      color: 'inherit',\n      padding: 0, // let the app bar do the padding\n      marginLeft: 0, // default is -12px wtf\n      marginRight: 4, // space between the title\n      [theme.breakpoints.up(600)]: {\n        marginRight: 8, // nitpicky: more room for landscape phones and up\n      },\n      // Hide on larger than wide tablet portrait\n      [theme.breakpoints.up('md')]: {\n        display: 'none',\n      },\n    },\n    subTitle: {\n      fontSize: '0.8rem',\n      [theme.breakpoints.down(600)]: {\n        fontSize: '0.5rem',\n      },\n    },\n    appBarBtns: {\n      color: 'inherit',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: theme.spacing(1),\n      },\n    },\n    signupLoginBtn: {\n      marginLeft: theme.spacing(1),\n      // Put login/signup btn into sidebar on mobile, too much 💩 up top\n      [theme.breakpoints.down(500)]: {\n        display: 'none',\n      },\n    },\n    signupLoginMobile: {\n      marginLeft: 4,\n      borderRadius: '100%',\n      background: theme.palette.primary.main,\n      padding: 3,\n      // Put login/signup btn into sidebar on mobile, too much 💩 up top\n      [theme.breakpoints.up(500)]: {\n        display: 'none',\n      },\n    },\n    snugBtnMobile: {\n      [theme.breakpoints.down(400)]: {\n        lineHeight: 1,\n        textAlign: 'center',\n        minWidth: 'auto', // default is not very compatible w/topbar flex\n        padding: 6,\n      },\n    },\n    badge: {\n      backgroundColor: 'hsla(36, 100%, 50%, 0.95)',\n      borderRadius: 7,\n      fontSize: '10px',\n      left: -11,\n      lineHeight: 1,\n      padding: '1px 3px',\n      position: 'absolute',\n      top: -3,\n      zIndex: 1,\n    },\n  }));\n\n  return topBarStyles();\n};\n\nexport const TopBar: FC<NavBarTypes> = ({\n  isHome,\n  toggleDrawerOpen,\n  drawerOpen,\n}) => {\n  const classes = useStyles(isHome);\n  const trigger = useScrollTrigger();\n  const [, loading] = useAuthState(firebase.auth());\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      <AppBar position=\"fixed\" className={classes.root}>\n        <Toolbar disableGutters className={classes.toolbar}>\n          <Burger\n            classes={classes}\n            toggleDrawerOpen={toggleDrawerOpen}\n            drawerOpen={drawerOpen}\n          />\n          <Box className={classes.titleAndBadge}>\n            <sup className={classes.badge}>BETA</sup>\n            <TitleWrap classes={classes} />\n          </Box>\n          {!loading && <TopBarBtns classes={classes} />}\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n};\n","import React, { useContext } from 'react';\nimport { FirebaseAuthConsumer } from '@react-firebase/auth';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  Typography,\n  IconButton,\n  Menu,\n  MenuItem,\n  ListItemText,\n} from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\n\nimport { logOut } from 'utils/firebase';\nimport { UserContext, GlobalContext } from 'context';\n\nconst useStyles = makeStyles(theme => ({\n  // Kind of a fight to prevent hover stuff on the non-clickable info\n  noBgChangeOnHover: {\n    '* &:hover': {\n      cursor: 'default',\n      backgroundColor: theme.palette.background.paper,\n    },\n  },\n  exitIcon: {\n    marginRight: theme.spacing(4),\n  },\n  avatar: {\n    // Let the top bar gutter have the final say, otherwise it doesn't fit in\n    // phone portrait without wrapping.\n    padding: 0,\n    marginLeft: 2,\n  },\n}));\n\nexport function UserPopoverMenu() {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const history = useHistory();\n  const { dispatch: globalDispatch } = useContext(GlobalContext);\n  const { dispatch: userDispatch } = useContext(UserContext);\n  const classes = useStyles();\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-label=\"account of current user\"\n        aria-controls=\"menu-appbar\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        className={classes.avatar}\n      >\n        <AccountCircle />\n      </IconButton>\n      <Menu\n        id=\"customized-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        disableAutoFocusItem\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {/*\n          NOTE: if there is no user.email, this section will look silly. Not \n          sure if this will be the case w/Google auth but if so then need a \n          check to determine if this should be shown.\n        */}\n        <MenuItem className={classes.noBgChangeOnHover} divider>\n          <ListItemText\n            className={classes.noBgChangeOnHover}\n            primary={\n              <>\n                <Typography\n                  variant=\"subtitle2\"\n                  color=\"textSecondary\"\n                  gutterBottom\n                >\n                  Signed in as\n                </Typography>\n                <FirebaseAuthConsumer>\n                  {({ user }) => user.email}\n                </FirebaseAuthConsumer>\n              </>\n            }\n          />\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            handleClose();\n            logOut(history, userDispatch, globalDispatch);\n          }}\n        >\n          <ExitToAppIcon fontSize=\"small\" className={classes.exitIcon} />\n          <ListItemText primary=\"Logout\" />\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nimport { SELF_REPORTED_STYLES } from 'config/map';\n\nexport const useStyles = makeStyles(theme => ({\n  root: {\n    // Self-reported markers in map, legend, etc. Includes clusters. Note that\n    // the parent needs a height/width since this child is 100%.\n    '& .self-reported-symbol': {\n      backgroundColor: SELF_REPORTED_STYLES.fillColor,\n      borderWidth: SELF_REPORTED_STYLES.borderWidth,\n      borderStyle: 'solid',\n      borderColor: SELF_REPORTED_STYLES.borderColor,\n      borderRadius: '100%',\n      width: '100%',\n      height: '100%',\n    },\n  },\n  toolbarIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: '0 8px',\n    ...theme.mixins.toolbar,\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    display: 'flex',\n    overflow: 'auto',\n    marginTop: '10rem',\n    marginBottom: theme.spacing(8),\n    [theme.breakpoints.up('md')]: {\n      maxWidth: theme.breakpoints.values.sm,\n    },\n    [theme.breakpoints.up('lg')]: {\n      maxWidth: theme.breakpoints.values.md,\n    },\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column',\n  },\n  fixedHeight: {\n    height: 240,\n  },\n}));\n","import React, { FC, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Container } from '@material-ui/core';\n\nimport { SiteNavBtns, BackToTopBtn, MobileOffCanvasNav } from 'components';\nimport { TopBar } from 'components/top-bar';\nimport { useStyles } from './dashboard.styles';\n\ntype DashboardTypes = {\n  children: React.ReactNode | null | undefined;\n};\n\n// CRED: https://material-ui.com/getting-started/templates/dashboard/\nexport const Dashboard: FC<DashboardTypes> = ({ children }) => {\n  const classes = useStyles();\n  const isHome = useLocation().pathname === '/';\n  const [drawerOpen, toggleDrawerOpen] = useState<boolean>(false);\n\n  return (\n    <div className={classes.root}>\n      <TopBar\n        isHome={isHome}\n        drawerOpen={drawerOpen}\n        toggleDrawerOpen={toggleDrawerOpen}\n      />\n      <div id=\"back-to-top-anchor\" />\n      {isHome ? (\n        children\n      ) : (\n        <Container component=\"main\" className={classes.content}>\n          {children}\n          <BackToTopBtn />\n        </Container>\n      )}\n      <MobileOffCanvasNav\n        drawerOpen={drawerOpen}\n        toggleDrawerOpen={toggleDrawerOpen}\n      >\n        <SiteNavBtns />\n      </MobileOffCanvasNav>\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\ntype OffCanvasTypes = {\n  drawerOpen: boolean;\n  toggleDrawerOpen: (active: boolean) => void;\n  children?: React.ReactNode;\n};\n\nexport const MobileOffCanvasNav: FC<OffCanvasTypes> = ({\n  drawerOpen,\n  toggleDrawerOpen,\n  children,\n}) => {\n  const theme = useTheme();\n  const wideTabletPortraitAndUp = useMediaQuery(theme.breakpoints.up('md'));\n\n  // Hide on larger than wide tablet portrait. While there is plenty of room\n  // on screens that wide in portrait, if people turn their phones sideways\n  // to landscape, they won't see the menu. 🙄\n  if (wideTabletPortraitAndUp) {\n    return <>{children}</>;\n  }\n\n  return (\n    <Drawer open={drawerOpen} onClose={() => toggleDrawerOpen(false)}>\n      <div\n        role=\"presentation\"\n        onClick={() => toggleDrawerOpen(false)}\n        onKeyDown={() => toggleDrawerOpen(false)}\n      >\n        {children}\n      </div>\n    </Drawer>\n  );\n};\n","import React, { FC } from 'react';\nimport { Grid } from '@material-ui/core';\nimport {\n  EmailIcon,\n  EmailShareButton,\n  FacebookIcon,\n  FacebookShareButton,\n  LinkedinIcon,\n  LinkedinShareButton,\n  PinterestIcon,\n  PinterestShareButton,\n  RedditIcon,\n  RedditShareButton,\n  TwitterIcon,\n  TwitterShareButton,\n  WhatsappIcon,\n  WhatsappShareButton,\n} from 'react-share';\n\nconst url = 'https://www.covidselfreport.org/';\nconst title = 'Have you experienced symptoms of COVID-19?';\nconst summary =\n  'Add your case and get counted for the COVID-19 public data project.';\nconst imgUrl =\n  'https://lh3.googleusercontent.com/zktcQvkd6gRu58UfwKVM1IN0L-PU28WbUtuGxVRKYTi7JHbtfcm0DRDQ93IzcTslmbeLPpNfoHAziQtLsL_niejdfopaVUQi24NgE58V1_vt0Nd1tQuLMkheMyUtxeB-KCSocl674kN8m0FJkPxeKZBZRnYpsDRajLG4TJ14oAijJIO5gM-Xjpp32uyOUH60zUU0hkwqVGosJ7ytJF3rgcRRtFSftS00w-_7ToZOSM7siQ0dF8Jok8w6pE88WyCa1sHPXF3GgOYI5ER9GcRXw_sSUhJiAiNmxi2DoieaL1PGB46ZcT5oc2r6rh-DuCkOgyU42IeclLQMEnjAre6uvt9hq-gFqCM7q6eYRF3hsAx_ombtbQGtWKgL8KY46M5-iAZs_z3HgIBH-e9V8tFuowthY36lhLfG9tHLTDxQyKoD-Z5YlqwNHSU9QK9uGkiZz1QFfbtkAvlG_-uHiTKwxHOgXxp6xsl8-zMppp1ohn24EVa6wQeJtGfsridPaPw82IjgVSjJ6V29pFWMXqjd5pbTsqSus2MuppFA_qLvveYzXcJHjFh3u1DuB0WnOeu-IaDWpirQ3cLpd6LqswvUpewSEuLFIseF1PV6baftlyWaqbTQ0VzJOIupUEwqrD0WA8BxzNzwpHIAJe6t7gX5tlUtBkmuMEPhZfgXnnYgzvT0XklTSCoT8shgLE4wtx2EDlJe=w1920-h978-ft';\nconst sourceAkaAppName = 'COVID-19 Self-reporting Tool';\n\nconst ShareButtonConfig = [\n  <FacebookShareButton url={url} quote={summary}>\n    <FacebookIcon size={32} round />\n  </FacebookShareButton>,\n  <TwitterShareButton url={url} title={`${title} ${summary}`}>\n    <TwitterIcon size={32} round />\n  </TwitterShareButton>,\n  <WhatsappShareButton url={url} title={title}>\n    <WhatsappIcon size={32} round />\n  </WhatsappShareButton>,\n  <LinkedinShareButton\n    url={url}\n    title={title}\n    summary={summary}\n    source={sourceAkaAppName}\n  >\n    <LinkedinIcon size={32} round />\n  </LinkedinShareButton>,\n  <PinterestShareButton url={url} title={title} media={imgUrl}>\n    <PinterestIcon size={32} round />\n  </PinterestShareButton>,\n  <RedditShareButton url={url} title={title}>\n    <RedditIcon size={32} round />\n  </RedditShareButton>,\n  <EmailShareButton url={url} subject={title} body={summary}>\n    <EmailIcon size={32} round />\n  </EmailShareButton>,\n];\n\nexport const ShareButtons: FC = () => {\n  return (\n    <Grid\n      container\n      spacing={1}\n      justify=\"center\"\n      wrap=\"nowrap\"\n      alignItems=\"center\"\n    >\n      {ShareButtonConfig.map((item, i) => (\n        <Grid key={i} item>\n          {item}\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n","import React, { FC } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Fab, Popover, Box } from '@material-ui/core';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { ShareButtons } from 'components';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  shareBtn: {\n    [theme.breakpoints.down(321)]: { display: 'none' },\n  },\n  shareBtnMobile: {\n    borderRadius: '100%',\n    [theme.breakpoints.up(321)]: {\n      display: 'none',\n    },\n  },\n}));\n\nexport const SharingPopoutMenu: FC = () => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n  const classes = useStyles();\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <Fab\n        size=\"small\"\n        aria-label=\"share\"\n        color=\"secondary\"\n        aria-describedby=\"long-menu\"\n        className={classes.shareBtnMobile}\n        onClick={handleClick}\n      >\n        <ShareIcon />\n      </Fab>\n      <Fab\n        variant=\"extended\"\n        size=\"small\"\n        aria-label=\"share\"\n        color=\"secondary\"\n        aria-describedby=\"long-menu\"\n        className={classes.shareBtn}\n        onClick={handleClick}\n      >\n        <ShareIcon />\n        Share\n      </Fab>\n      <Popover\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        transformOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n      >\n        <Box onClick={handleClose} padding={2}>\n          <ShareButtons />\n        </Box>\n      </Popover>\n    </div>\n  );\n};\n","import React, { FC, useState } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n} from '@material-ui/core';\n\ntype SimpleModalTypes = {\n  children: React.ReactNode;\n  title: string;\n  fullScreen?: boolean;\n  leftSideElems?: () => React.ReactNode; // e.g. \"Don't have an account?\"\n  onClose?: () => void;\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  actionBtn: {\n    minWidth: 40,\n  },\n  dialogContent: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\nexport const SimpleModal: FC<SimpleModalTypes> = ({\n  children,\n  title,\n  leftSideElems,\n  fullScreen = true,\n  onClose,\n}) => {\n  const classes = useStyles();\n  const [open, setOpen] = useState(true);\n\n  const handleClose = () => {\n    setOpen(false);\n\n    if (onClose) {\n      onClose();\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      fullScreen={fullScreen}\n      aria-labelledby=\"form-dialog-title\"\n      onClose={handleClose}\n      fullWidth\n    >\n      <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\n      <DialogContent dividers className={classes.dialogContent}>\n        {children}\n      </DialogContent>\n      <DialogActions>\n        {leftSideElems ? leftSideElems() : null}\n        <Button\n          className={classes.actionBtn}\n          onClick={() => handleClose()}\n          color=\"primary\"\n          size=\"small\"\n        >\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  Typography,\n  Link,\n  List,\n  ListItem,\n  ListItemText,\n} from '@material-ui/core';\nimport MapIcon from '@material-ui/icons/Map';\nimport ListIcon from '@material-ui/icons/List';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst useStyles = makeStyles(theme => {\n  const navItemSize = 80; // TODO: make consistent with MobileOffCanvas\n  const shadow = '1px 1px 3px hsla(180, 2%, 10%, 0.75)';\n\n  return {\n    list: {\n      paddingTop: theme.spacing(4),\n      [theme.breakpoints.up('md')]: {\n        left: 0,\n        zIndex: 401,\n        position: 'fixed',\n        top: 115, // past top bar on wide portrait and above\n      },\n    },\n    listItem: {\n      height: navItemSize,\n      justifyContent: 'center',\n    },\n    navItemLink: {\n      alignItems: 'center',\n      color: theme.palette.common.white,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      textShadow: shadow,\n      '& svg': {\n        // CRED: https://stackoverflow.com/a/13624469/1048518\n        WebkitFilter: `drop-shadow(${shadow})`,\n        filter: `drop-shadow(${shadow})`,\n      },\n    },\n  };\n});\n\n// The top-level nav btns in sidebar or wherever\nexport const SiteNavBtns: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <List className={classes.list}>\n      <ListItem button component=\"li\" className={classes.listItem}>\n        <Link to=\"/\" component={RouterLink} className={classes.navItemLink}>\n          <MapIcon />\n          <ListItemText\n            primary={<Typography variant=\"subtitle2\">Map</Typography>}\n          />\n        </Link>\n      </ListItem>\n      <ListItem button component=\"li\" className={classes.listItem}>\n        <Link to=\"/list\" component={RouterLink} className={classes.navItemLink}>\n          <ListIcon />\n          <ListItemText\n            primary={<Typography variant=\"subtitle2\">List</Typography>}\n          />\n        </Link>\n      </ListItem>\n      <ListItem button component=\"li\" className={classes.listItem}>\n        <Link\n          to=\"/models\"\n          component={RouterLink}\n          className={classes.navItemLink}\n        >\n          <BarChartIcon />\n          <ListItemText\n            primary={<Typography variant=\"subtitle2\">Models</Typography>}\n          />\n        </Link>\n      </ListItem>\n      <ListItem button component=\"li\" className={classes.listItem}>\n        <Link\n          to=\"/about\"\n          component={RouterLink}\n          className={classes.navItemLink}\n        >\n          <InfoIcon />\n          <ListItemText\n            primary={<Typography variant=\"subtitle2\">About</Typography>}\n          />\n        </Link>\n      </ListItem>\n    </List>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\n\nimport { GlobalContext } from 'components';\n\nfunction Alert(props: AlertProps) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\n// TODO: restore for login/logout success/fail\nexport const CustomSnackbar: FC = () => {\n  const { state, dispatch } = useContext(GlobalContext);\n  const { open, message = '', severity, duration } = state.uiAlert;\n\n  const handleCloseInternal = (\n    event?: React.SyntheticEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    if (state.uiAlert.open) {\n      dispatch({\n        type: 'TOGGLE_UI_ALERT',\n        payload: {\n          open: false,\n          message: '',\n        },\n      });\n    }\n  };\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration || 4500}\n      onClose={handleCloseInternal}\n      key={message}\n    >\n      <Alert onClose={handleCloseInternal} severity={severity}>\n        {message}\n      </Alert>\n    </Snackbar>\n  );\n};\n","import React from 'react';\nimport { Color } from '@material-ui/lab/Alert';\n\nexport type CountriesFieldsForTotals = {\n  total_confirmed: number;\n  total_deaths: number;\n  total_recovered: number;\n};\n\nexport type AlertPayloadType = {\n  open: boolean;\n  message?: string;\n  severity?: Color;\n  duration?: number | null; // null means the error doesn't auto hide\n};\n\nexport type LoginSignupModalType = 'login' | 'signup' | null;\n\nexport type StoreActionType =\n  | {\n      type: 'TOGGLE_UI_ALERT';\n      payload: AlertPayloadType;\n    }\n  | {\n      type: 'SET_COUNTRY_SYMBOLOGY';\n      payload: keyof CountriesFieldsForTotals;\n    }\n  | { type: 'TOGGLE_LAYER_VISIBILITY'; payload: keyof LayerVisibilityTypes }\n  | {\n      type: 'TOGGLE_LOGIN_SIGNUP_MODAL';\n      payload: LoginSignupModalType;\n    }\n  | { type: 'SHOW_SPLASH'; payload: boolean };\n\nexport type CurrentTotalsTypes = {\n  confirmed: number;\n  deaths: number;\n  recovered: number;\n  selfReported: number;\n};\n\nexport type CountryData = {\n  total_confirmed: number;\n  total_deaths: number;\n  total_recovered: number;\n  new_confirmed: number;\n  new_deaths: number;\n  new_recovered: number;\n  date: Date;\n};\n\n// TODO: use `keyof` to restrict possible values appropriately in Tickers\nexport type LayerVisibilityTypes = {\n  selfReported: boolean;\n  countries: boolean;\n};\n\n// TOOD: get these from existing types\nexport type InitialStateType = {\n  activeCountrySymbKey: keyof CountriesFieldsForTotals;\n  layerVisibility: LayerVisibilityTypes;\n  showSplash: boolean;\n  hasSeenSplash: boolean;\n  uiAlert: AlertPayloadType;\n  loginSignupModal: LoginSignupModalType;\n};\n\nexport type GlobalContextDispatchType = React.Dispatch<StoreActionType>;\n\nexport type Location = {\n  lat: number;\n  lng: number;\n};\n\nexport type Symptom = {\n  isPresent: boolean;\n  startDate: Date | null;\n  endDate: Date | null;\n};\n\nexport enum Symptoms {\n  headache = 'headache',\n  fever = 'fever',\n  shortnessOfBreath = 'shortnessOfBreath',\n  dryCough = 'dryCough',\n  wetCough = 'wetCough',\n  runnyNose = 'runnyNose',\n  wheezing = 'wheezing',\n  chestPain = 'chestPain',\n  bodyAche = 'bodyAche',\n  lightHeadedness = 'lightHeadedness',\n  confusion = 'confusion',\n  fatigue = 'fatigue',\n  nausea = 'nausea',\n  reducedTaste = 'reducedTaste',\n  reducedSmell = 'reducedSmell',\n  soreThroat = 'soreThroat',\n  diarrhea = 'diarrhea',\n  abdominalPain = 'abdominalPain',\n}\n\nexport type SymptomFever = {\n  isPresent: boolean;\n  startDate?: Date | null;\n  endDate?: Date | null;\n  temperature?: number;\n  severity?: number;\n};\n\nexport type SymptomForm = {\n  symptoms: { [index in keyof typeof Symptoms]: SymptomFever };\n  location: Location | null;\n  city: string | null;\n  state: string | null;\n  county: string | null;\n  country: string | null;\n  address: string | undefined;\n  email: string | null;\n  birthMonth: number | null;\n  birthYear: number | null;\n  phoneNumber: string | null;\n  numTimesTested: number | null;\n  tested: boolean | undefined;\n  seenPhysician: boolean | undefined;\n  testedPositive: boolean | undefined;\n  doctorDiagnosis: DoctorDiagnosis;\n  hasAgreedToTerms: boolean;\n};\n\nexport type DoctorDiagnosis =\n  | 'suspected'\n  | 'inconclusive'\n  | 'negative'\n  | undefined;\n\nexport type DispatchFormType = React.Dispatch<SubmissionFormAction>;\n\nexport type DispatchStoreType = React.Dispatch<StoreActionType>;\n\nexport type AddressComponents = {\n  city: string | null;\n  state: string | null;\n  county: string | null;\n  country: string | null;\n};\n\nexport type SubmissionFormAction =\n  | { type: 'TOGGLE_SYMPTOM'; payload: Symptoms }\n  | { type: 'SET_VALUE' }\n  | {\n      type: 'SET_SYMPTOM_START_DATE';\n      payload: { symptom: Symptoms; startDate: Date | null };\n    }\n  | {\n      type: 'SET_SYMPTOM_END_DATE';\n      payload: { symptom: Symptoms; endDate: Date | null };\n    }\n  | { type: 'SET_NUM_TIMES_TESTED'; payload: number }\n  | { type: 'TOGGLE_AGREED' }\n  | { type: 'SET_USER_DATA'; payload: SymptomForm }\n  | { type: 'SET_TESTED'; payload: boolean }\n  | { type: 'SET_ADDRESS'; payload: string }\n  | { type: 'SET_SEEN_PHYSICIAN'; payload: boolean }\n  | { type: 'SET_TESTED_POSITIVE'; payload: boolean }\n  | { type: 'SET_DOCTOR_DIAGNOSIS'; payload: string }\n  | { type: 'RESET_VALUE'; payload: keyof SymptomForm }\n  | { type: 'SET_LOCATION'; payload: Location }\n  | {\n      type: 'SET_ADDRESS_COMPONENTS';\n      payload: AddressComponents;\n    }\n  | { type: 'RESET_USER_DATA' }\n  | {\n      type: 'SET_BIRTH_DATE';\n      payload: { birthMonth: number; birthYear: number };\n    }\n  | { type: 'RESET_SYMPTOMS' };\n","import React, { FC, useContext } from 'react';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Grid,\n  Link,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { GlobalContext } from 'context';\n\n// Styles for main parent component\nconst useStyles = makeStyles((theme: Theme) => ({\n  dialogTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  closeButton: {\n    color: theme.palette.grey[500],\n    padding: 0,\n  },\n  symptomsBtn: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(3),\n  },\n  exitToMapBtn: {\n    marginLeft: 'auto',\n  },\n}));\n\ninterface DialogTitleProps {\n  id: string;\n  children: React.ReactNode;\n  onClose: () => void;\n  classes: {\n    [key: string]: string;\n  };\n}\n\nconst Title: FC<DialogTitleProps> = props => {\n  const { children, classes, onClose, ...other } = props;\n\n  return (\n    <DialogTitle disableTypography {...other} className={classes.dialogTitle}>\n      <Typography variant=\"h6\">{children}</Typography>\n      <IconButton\n        aria-label=\"close\"\n        className={classes.closeButton}\n        onClick={onClose}\n      >\n        <CloseIcon />\n      </IconButton>\n    </DialogTitle>\n  );\n};\n\nexport const SplashScreen: FC = () => {\n  const classes = useStyles();\n  const { state, dispatch } = useContext(GlobalContext);\n\n  const handleClickOpen = () => {\n    dispatch({ type: 'SHOW_SPLASH', payload: true });\n  };\n\n  const handleClose = () => {\n    dispatch({ type: 'SHOW_SPLASH', payload: false });\n  };\n\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        Open dialog\n      </Button>\n      <Dialog\n        onClose={handleClose}\n        aria-labelledby=\"customized-dialog-title\"\n        open={state.showSplash}\n      >\n        <Title\n          id=\"customized-dialog-title\"\n          onClose={handleClose}\n          classes={classes}\n        >\n          COVID-19 Self-reporting Tool\n        </Title>\n        <DialogContent dividers>\n          <Typography align=\"center\" gutterBottom variant=\"h4\">\n            Have you experienced symptoms of COVID-19 in the last four months?\n          </Typography>\n          <Typography variant=\"body1\" align=\"center\" gutterBottom>\n            There is a shortage of COVID-19 test-kits around the world and many\n            of us with symptoms aren't being counted. Add your case to the\n            public map and get counted so that we can estimate the true spread\n            of the virus. Let's fight COVID-19 together.\n          </Typography>\n          <Grid container justify=\"center\">\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              data-cy=\"add-symptoms-splash\"\n              to=\"/self-report\"\n              component={RouteLink}\n              onClick={handleClose}\n              size=\"large\"\n              className={classes.symptomsBtn}\n            >\n              Add symptoms\n            </Button>\n          </Grid>\n          <Typography align=\"center\" gutterBottom variant=\"subtitle2\">\n            This is an open source public data project -{' '}\n            <Link href=\"./about#our-story\">Read our story and learn more</Link>\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleClose}\n            color=\"primary\"\n            className={classes.exitToMapBtn}\n          >\n            View symptoms map\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","import React, { FC } from 'react';\n\nexport const Disclaimer: FC = () => {\n  return (\n    <p className=\"simpler-font\" style={{ fontSize: 11 }}>\n      <b>Disclaimer:&nbsp;</b>\n      This tool will not provide a diagnosis, nor will it count you as a\n      confirmed coronavirus case based on symptoms alone. By providing this\n      information you will help build a better understanding of how widespread\n      COVID-19 may be in your area, and ultimately help communities overcome\n      this crisis together. Your privacy and security come first, and only you\n      control your data.\n    </p>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { makeStyles, Theme, useTheme } from '@material-ui/core/styles';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Slide,\n  Typography,\n  useMediaQuery,\n} from '@material-ui/core';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport CheckCircleRoundedIcon from '@material-ui/icons/CheckCircleRounded';\n\nimport { GlobalContext, ShareButtons } from 'components';\nimport { Disclaimer } from './Disclaimer';\nimport { useSubmitted } from '../utils/queries';\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & { children?: React.ReactElement<any, any> },\n  ref: React.Ref<unknown>\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ninterface SuccessConfModalTypes {\n  open: boolean;\n  setOpen: React.Dispatch<boolean>;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  icon: {\n    color: theme.palette.success.main,\n    marginRight: 4,\n  },\n  dialog: {\n    // DialogTitle child is created dynamically as a <Typography> component. Can\n    // disable that but then we lose the consistency w/the other dialog titles.\n    '& .MuiDialogTitle-root > .MuiTypography-root': {\n      display: 'flex',\n      alignItems: 'center',\n    },\n  },\n  dialogContent: {\n    // The recent global default of `center` looks bad here (too many elems...)\n    justifyContent: 'flex-start',\n  },\n  divider: {\n    margin: theme.spacing(2),\n  },\n}));\n\nexport const SuccessConfModal: FC<SuccessConfModalTypes> = props => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const { dispatch } = useContext(GlobalContext);\n  const { open, setOpen } = props;\n  const { data: submissions } = useSubmitted(dispatch);\n  const smallAndUp = useMediaQuery(theme.breakpoints.up('sm'));\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Dialog\n      open={open}\n      fullScreen={!smallAndUp}\n      data-cy=\"successful-submission\"\n      transitionDuration={{ enter: 900, exit: 400 }}\n      TransitionComponent={Transition}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-slide-title\"\n      aria-describedby=\"alert-dialog-slide-description\"\n      className={classes.dialog}\n    >\n      <DialogTitle id=\"alert-dialog-slide-title\">\n        <CheckCircleRoundedIcon className={classes.icon} />\n        Submission sent\n      </DialogTitle>\n      <DialogContent dividers className={classes.dialogContent}>\n        <Box textAlign=\"center\" paddingRight={2} paddingLeft={2}>\n          <Typography>\n            Thank you for contributing! To date,{' '}\n            {submissions && submissions.length} users like you have added\n            themselves to the world map.\n          </Typography>\n        </Box>\n        <Divider variant=\"middle\" className={classes.divider} />\n        <Box padding={2}>\n          <ShareButtons />\n        </Box>\n        <Typography variant=\"h5\">What you can do next:</Typography>\n        <ol className=\"simpler-font\" style={{ fontSize: 16, paddingLeft: 30 }}>\n          <li>\n            Share this with your friends and family by using the share buttons\n            above.\n          </li>\n          <li>\n            Provide your{' '}\n            <a\n              target=\"_blank\"\n              className=\"obvious-link\"\n              rel=\"noopener noreferrer\"\n              href=\"https://docs.google.com/forms/d/e/1FAIpQLSfkQJMihQUlA6scYvjr1A1OZiXGRRxQLkD1YIiklGDq5YTclQ/viewform?usp=sf_link\"\n            >\n              thoughts and feedback\n            </a>\n            .\n          </li>\n          <li>\n            Learn more about your symptoms at the{' '}\n            <a\n              target=\"_blank\"\n              className=\"obvious-link\"\n              rel=\"noopener noreferrer\"\n              href=\"https://www.who.int/emergencies/diseases/novel-coronavirus-2019\"\n            >\n              World Health Organization’s COVID-19 page\n            </a>\n            .\n          </li>\n          <li>\n            Come back soon and get updates on trends of potential and confirmed\n            infections in your area.\n          </li>\n        </ol>\n        <Disclaimer />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React, { FC, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Typography, Dialog } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  browserMessage: {\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center',\n    textAlign: 'center',\n    padding: `${theme.spacing(4)}px ${theme.spacing(3)}px `,\n  },\n}));\n\nexport const UnsupportedBrowserMsg: FC = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [open, setOpen] = useState(true);\n\n  const handleClose = () => {\n    setOpen(false);\n    history.push('/');\n  };\n\n  return (\n    <Dialog\n      open={open}\n      aria-labelledby=\"form-dialog-title\"\n      fullWidth\n      maxWidth=\"sm\"\n      onClose={handleClose}\n    >\n      <div className={classes.browserMessage}>\n        <Typography align=\"center\" gutterBottom variant=\"h4\">\n          Unsupported Browser\n        </Typography>\n        <p>\n          To submit your report, please open this site in a supported browser\n          such as Safari or Google Chrome.\n        </p>\n        <Button color=\"secondary\" variant=\"contained\" onClick={handleClose}>\n          Exit to map\n        </Button>\n      </div>\n    </Dialog>\n  );\n};\n","import React, { FC, useState } from 'react';\nimport {\n  Paper,\n  Grid,\n  TextField,\n  Button,\n  Fade,\n  CircularProgress,\n} from '@material-ui/core';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport { makeStyles } from '@material-ui/styles';\nimport firebase from 'firebase/app';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '20px',\n  },\n  marginTop: {\n    marginTop: '15px',\n  },\n});\n\ntype VerifyEmailType = {\n  afterVerification?: () => void;\n};\n\nexport const VerifyEmailForm: FC<VerifyEmailType> = ({ afterVerification }) => {\n  const [email, setEmail] = useState<string>('');\n  const [emailError, setEmailError] = useState<boolean>(false);\n  const [emailErrorMessage, setEmailErrorMessage] = useState<string>('');\n  const [sent, setSent] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const classes = useStyles();\n\n  const handleEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(event.target.value);\n  };\n\n  const handleFirebaseError = (code: string, message: string) => {\n    switch (code) {\n      case 'auth/invalid-email':\n        setEmailError(true);\n        setEmailErrorMessage('Invalid email');\n        break;\n      case 'auth/user-not-found':\n        setEmailError(true);\n        setEmailErrorMessage('User does not exist');\n        break;\n      default:\n        alert(message);\n        break;\n    }\n  };\n\n  const resetErrors = () => {\n    setEmailError(false);\n    setEmailErrorMessage('');\n  };\n\n  const handleVerifyEmail = async (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    resetErrors();\n\n    setLoading(true);\n    setEmail('');\n    await firebase\n      .auth()\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        if (afterVerification) {\n          afterVerification();\n        }\n        setSent(true);\n        setTimeout(() => {\n          setSent(false);\n        }, 5000);\n      })\n      .catch(err => {\n        handleFirebaseError(err.code, err.message);\n      });\n    setLoading(false);\n  };\n\n  return (\n    <Paper className={classes.root}>\n      <div>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item md sm xs={12}>\n            <TextField\n              id=\"email\"\n              label=\"Enter your email\"\n              type=\"email\"\n              value={email}\n              onChange={handleEmailChange}\n              error={emailError}\n              helperText={emailErrorMessage}\n              fullWidth\n              required\n            />\n          </Grid>\n        </Grid>\n        <Grid\n          container\n          justify=\"center\"\n          alignItems=\"center\"\n          className={classes.marginTop}\n        >\n          <Grid item xs={12}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              style={{ textTransform: 'none', marginRight: '20px' }}\n              onClick={handleVerifyEmail}\n              disabled={loading}\n            >\n              Verify Email\n            </Button>\n          </Grid>\n          {loading && (\n            <Grid item xs={12}>\n              <CircularProgress />\n            </Grid>\n          )}\n        </Grid>\n        <Grid container>\n          <Grid item md sm xs={12}>\n            <Fade in={sent}>\n              <Alert severity=\"success\" className={classes.marginTop}>\n                <AlertTitle>Verification Email Sent</AlertTitle>\n                You should receive an email in a few minutes to reset your\n                password\n              </Alert>\n            </Fade>\n          </Grid>\n        </Grid>\n      </div>\n    </Paper>\n  );\n};\n","export const camelCaseToLabel = (original: string) => {\n  const result = original.replace(/([A-Z])/g, ' $1');\n  return result.charAt(0).toUpperCase() + result.slice(1);\n};\n","import React, { FC, useState, useContext } from 'react';\nimport {\n  DialogTitle,\n  DialogContent,\n  FormGroup,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Button,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nimport { camelCaseToLabel } from 'utils/strings';\nimport { UserContext } from 'context';\nimport { Symptoms } from 'context/types';\n// TODO: maybe fancy upgrade later:\n// https://github.com/mui-org/material-ui-pickers/releases/tag/v4.0.0-alpha.5\n\nconst useStyles = makeStyles(theme => ({\n  dialogTitle: {\n    padding: `4px ${theme.spacing(2)}px`,\n  },\n  center: {\n    paddingTop: 30,\n    paddingLeft: 10,\n  },\n  checkbox: {\n    padding: 4,\n    [theme.breakpoints.up('sm')]: {\n      padding: theme.spacing(1),\n    },\n  },\n  firstPageBtnsWrap: {\n    marginTop: 6,\n  },\n  datePicker: {\n    marginLeft: 5,\n    marginRight: 5,\n  },\n  marginTop: {\n    marginTop: 20,\n  },\n  link: {\n    color: theme.palette.grey['900'],\n  },\n}));\n\ntype SymptomStepType = {\n  setActiveStep: Function;\n};\n\nexport const SymptomStep: FC<SymptomStepType> = ({ setActiveStep }) => {\n  const classes = useStyles();\n  const { state: formState, dispatch: dispatchForm } = useContext(UserContext);\n\n  // This is to create a grid layout, split into two groups\n  const allSymptoms = Object.keys(Symptoms) as Array<keyof typeof Symptoms>;\n  const halfwayThrough = Math.floor(allSymptoms.length / 2);\n  const firstHalfSymptoms: Array<keyof typeof Symptoms> = allSymptoms.splice(\n    0,\n    halfwayThrough\n  );\n  const lastHalfSymptoms: Array<keyof typeof Symptoms> = allSymptoms;\n  const [showDates, setShowDates] = useState<boolean>(false);\n\n  const hasSymptoms = () => {\n    return getSymptoms().length > 0;\n  };\n\n  // this should not return an array of string\n  const getSymptoms = () => {\n    return Object.keys(formState.symptoms).filter(\n      // @ts-ignore\n      (symptom: any) => formState.symptoms[symptom].isPresent\n    );\n  };\n\n  const handleStartDateChange = (\n    date: Date | null,\n    symptom: keyof typeof Symptoms\n  ) => {\n    dispatchForm({\n      type: 'SET_SYMPTOM_START_DATE',\n      // @ts-ignore\n      payload: { symptom: symptom, startDate: date },\n    });\n  };\n\n  const handleEndDateChange = (\n    date: Date | null,\n    symptom: keyof typeof Symptoms\n  ) => {\n    dispatchForm({\n      type: 'SET_SYMPTOM_END_DATE',\n      // @ts-ignore\n      payload: { symptom: symptom, endDate: date },\n    });\n  };\n\n  const noSymptoms = () => {\n    dispatchForm({\n      type: 'RESET_SYMPTOMS',\n    });\n    setActiveStep(1);\n  };\n\n  return (\n    <>\n      {!showDates ? (\n        <>\n          <DialogTitle id=\"form-dialog-title\">\n            What are your symptoms?\n          </DialogTitle>\n          <DialogContent dividers>\n            <Grid container>\n              <Grid item xs={6}>\n                {firstHalfSymptoms.map((symptom, idx) => (\n                  <FormGroup key={idx}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          size=\"small\"\n                          className={classes.checkbox}\n                          checked={formState.symptoms[symptom].isPresent}\n                          onChange={() =>\n                            dispatchForm({\n                              type: 'TOGGLE_SYMPTOM',\n                              payload: Symptoms[symptom],\n                            })\n                          }\n                          name={Symptoms[symptom]}\n                          color=\"primary\"\n                        />\n                      }\n                      label={camelCaseToLabel(Symptoms[symptom])}\n                    />\n                  </FormGroup>\n                ))}\n              </Grid>\n              <Grid item xs={6}>\n                {lastHalfSymptoms.map((symptom, idx) => (\n                  <FormGroup key={idx}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          size=\"small\"\n                          className={classes.checkbox}\n                          checked={formState.symptoms[symptom].isPresent}\n                          onChange={() =>\n                            dispatchForm({\n                              type: 'TOGGLE_SYMPTOM',\n                              payload: Symptoms[symptom],\n                            })\n                          }\n                          name={Symptoms[symptom]}\n                          color=\"primary\"\n                        />\n                      }\n                      label={camelCaseToLabel(Symptoms[symptom])}\n                    />\n                  </FormGroup>\n                ))}\n              </Grid>\n            </Grid>\n            <Grid\n              container\n              justify=\"center\"\n              spacing={2}\n              className={classes.firstPageBtnsWrap}\n            >\n              <Grid item>\n                <Button\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  onClick={() => noSymptoms()}\n                >\n                  I have no symptoms\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  size=\"small\"\n                  onClick={() => setShowDates(!showDates)}\n                  color=\"secondary\"\n                  variant=\"contained\"\n                  disabled={!showDates && !hasSymptoms()}\n                >\n                  Set Symptom Dates\n                </Button>\n              </Grid>\n            </Grid>\n          </DialogContent>\n        </>\n      ) : (\n        <>\n          <DialogTitle className={classes.dialogTitle}>\n            When did you have these symptoms?\n          </DialogTitle>\n          <DialogContent dividers>\n            <Grid container>\n              <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                {getSymptoms().map((\n                  symptom: any // TODO: fix type any\n                ) => (\n                  <>\n                    <Grid item xs={4}>\n                      <Typography className={classes.center}>\n                        {camelCaseToLabel(symptom)}\n                      </Typography>\n                    </Grid>\n                    <Grid item xs={4}>\n                      <KeyboardDatePicker\n                        className={classes.datePicker}\n                        disableToolbar\n                        variant=\"inline\"\n                        format=\"MM/dd/yyyy\"\n                        margin=\"normal\"\n                        label=\"Start Date\"\n                        maxDate={new Date()}\n                        // @ts-ignore\n                        value={formState.symptoms[symptom].startDate}\n                        onChange={date =>\n                          handleStartDateChange(date, symptom as any)\n                        }\n                        KeyboardButtonProps={{\n                          'aria-label': 'change date',\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={4}>\n                      <KeyboardDatePicker\n                        className={classes.datePicker}\n                        disableToolbar\n                        variant=\"inline\"\n                        format=\"MM/dd/yyyy\"\n                        margin=\"normal\"\n                        label=\"End Date\"\n                        // @ts-ignore\n                        minDate={formState.symptoms[symptom].startDate}\n                        maxDate={new Date()}\n                        // @ts-ignore\n                        value={formState.symptoms[symptom].endDate}\n                        onChange={date =>\n                          handleEndDateChange(date, symptom as any)\n                        }\n                      />\n                    </Grid>\n                  </>\n                ))}\n              </MuiPickersUtilsProvider>\n            </Grid>\n            <Grid container justify=\"center\">\n              <Grid item>\n                <Button\n                  size=\"small\"\n                  onClick={() => setShowDates(!showDates)}\n                  variant=\"outlined\"\n                >\n                  Go Back to Symptoms\n                </Button>\n              </Grid>\n            </Grid>\n          </DialogContent>\n        </>\n      )}\n    </>\n  );\n};\n","import React, { FC } from 'react';\nimport { SymptomForm, DispatchFormType } from 'context/types';\nimport {\n  FormControlLabel,\n  DialogTitle,\n  DialogContent,\n  Grid,\n  Radio,\n  RadioGroup,\n  FormControl,\n  FormLabel,\n  InputLabel,\n  Select,\n  MenuItem,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\nconst useStyles = makeStyles(theme => ({\n  dialogTitle: {\n    padding: `4px ${theme.spacing(2)}px`,\n  },\n  dropdown: {\n    marginTop: 10,\n  },\n  selector: {\n    marginBottom: 10,\n  },\n  datePicker: {\n    marginBottom: 20,\n  },\n  formLabel: {\n    marginTop: theme.spacing(1),\n  },\n}));\n\ntype TestingStepType = {\n  formState: SymptomForm;\n  dispatchForm: DispatchFormType;\n};\n\nexport const TestingStep: FC<TestingStepType> = ({\n  formState,\n  dispatchForm,\n}) => {\n  const classes = useStyles();\n\n  const handlePhysicianDiagnosis = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    dispatchForm({ type: 'SET_DOCTOR_DIAGNOSIS', payload: event.target.value });\n  };\n\n  const handleBirthDate = (date: MaterialUiPickersDate) => {\n    if (date) {\n      const month = date.getMonth() + 1;\n      const year = date.getFullYear();\n      dispatchForm({\n        type: 'SET_BIRTH_DATE',\n        payload: { birthMonth: month, birthYear: year },\n      });\n    }\n  };\n\n  const getBirthMonthYear = () => {\n    const month = formState.birthMonth;\n    const year = formState.birthYear;\n    if (month && year) {\n      const date = new Date();\n      date.setFullYear(year);\n      date.setMonth(month - 1);\n      return date;\n    }\n    return null;\n  };\n\n  return (\n    <>\n      <DialogTitle id=\"form-dialog-title\" className={classes.dialogTitle}>\n        Test Results\n      </DialogTitle>\n      <DialogContent dividers>\n        <Grid container>\n          <FormControl>\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\n              <DatePicker\n                className={classes.datePicker}\n                views={['year', 'month']}\n                value={getBirthMonthYear()}\n                onChange={handleBirthDate}\n                maxDate={new Date()}\n                label=\"Birth Month/Year\"\n              />\n            </MuiPickersUtilsProvider>\n            <FormLabel className={classes.formLabel}>\n              Have you been tested for CoVID-19?\n            </FormLabel>\n            <RadioGroup\n              row\n              value={String(formState.tested)}\n              onChange={event => {\n                dispatchForm({\n                  type: 'SET_TESTED',\n                  payload: event.target.value === 'true',\n                });\n              }}\n            >\n              <FormControlLabel\n                data-cy=\"tested-covid-yes\"\n                control={<Radio value=\"true\" />}\n                label=\"Yes\"\n              />\n              <FormControlLabel\n                data-cy=\"tested-covid-no\"\n                control={<Radio value=\"false\" />}\n                label=\"No\"\n              />\n            </RadioGroup>\n          </FormControl>\n          {formState.tested && (\n            <>\n              <Grid item xs={12}>\n                <InputLabel\n                  id=\"demo-simple-select-label\"\n                  className={classes.dropdown}\n                >\n                  How many times?\n                </InputLabel>\n                <Select\n                  labelId=\"demo-simple-select-label\"\n                  id=\"demo-simple-select\"\n                  value={formState.numTimesTested}\n                  className={classes.selector}\n                  onChange={event =>\n                    dispatchForm({\n                      type: 'SET_NUM_TIMES_TESTED',\n                      payload: event.target.value as number,\n                    })\n                  }\n                >\n                  <MenuItem value={1}>One</MenuItem>\n                  <MenuItem value={2}>Two</MenuItem>\n                  <MenuItem value={3}>Three</MenuItem>\n                </Select>\n              </Grid>\n              <FormControl>\n                <FormLabel className={classes.formLabel}>\n                  Did you test positive?\n                </FormLabel>\n                <RadioGroup\n                  row\n                  value={String(formState.testedPositive)}\n                  onChange={event => {\n                    dispatchForm({\n                      type: 'SET_TESTED_POSITIVE',\n                      payload: event.target.value === 'true',\n                    });\n                  }}\n                >\n                  <FormControlLabel\n                    control={<Radio value=\"true\" />}\n                    label=\"Yes\"\n                  />\n                  <FormControlLabel\n                    control={<Radio value=\"false\" />}\n                    label=\"No\"\n                  />\n                </RadioGroup>\n              </FormControl>\n            </>\n          )}\n          {formState.tested === false && (\n            <Grid item xs={12}>\n              <FormControl>\n                <FormLabel className={classes.formLabel}>\n                  Have you seen a physician?\n                </FormLabel>\n                <RadioGroup\n                  row\n                  value={String(formState.seenPhysician)}\n                  onChange={event => {\n                    dispatchForm({\n                      type: 'SET_SEEN_PHYSICIAN',\n                      payload: event.target.value === 'true',\n                    });\n                  }}\n                >\n                  <FormControlLabel\n                    control={\n                      <Radio data-cy=\"seen-physician-yes\" value=\"true\" />\n                    }\n                    label=\"Yes\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Radio data-cy=\"seen-physician-no\" value=\"false\" />\n                    }\n                    label=\"No\"\n                  />\n                </RadioGroup>\n              </FormControl>\n            </Grid>\n          )}\n          {formState.seenPhysician === true && (\n            <FormControl>\n              <FormLabel className={classes.formLabel}>\n                What did your physician say?\n              </FormLabel>\n              <RadioGroup\n                row\n                value={String(formState.doctorDiagnosis)}\n                onChange={handlePhysicianDiagnosis}\n              >\n                <FormControlLabel\n                  control={<Radio value=\"suspected\" />}\n                  label=\"Suspected CoVID-19\"\n                />\n                <FormControlLabel\n                  control={<Radio value=\"inconclusive\" />}\n                  label=\"Inconclusive\"\n                />\n                <FormControlLabel\n                  control={<Radio value=\"negative\" />}\n                  label=\"Definitely not CoVID-19\"\n                />\n              </RadioGroup>\n            </FormControl>\n          )}\n        </Grid>\n      </DialogContent>\n    </>\n  );\n};\n","import React, { FC, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DialogTitle, DialogContent, TextField } from '@material-ui/core';\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from 'react-places-autocomplete';\nimport { grey } from '@material-ui/core/colors';\nimport 'date-fns';\n\nimport { Location } from 'context/types';\nimport { UserContext } from 'context';\n\nconst useStyles = makeStyles(theme => ({\n  dialogTitle: {\n    padding: `4px ${theme.spacing(2)}px`,\n  },\n  dialogText: {\n    padding: `4px ${theme.spacing(2)}px`,\n  },\n}));\n\nexport const LocationDetailsStep: FC = () => {\n  const classes = useStyles();\n  const { state: formState, dispatch: dispatchForm } = useContext(UserContext);\n\n  const handleSelectAddress = (newAddress: string) => {\n    geocodeByAddress(newAddress)\n      .then((results: any) => {\n        const addressComponents: {\n          city: string | null;\n          county: string | null;\n          state: string | null;\n          country: string | null;\n        } = {\n          city: null,\n          county: null,\n          state: null,\n          country: null,\n        };\n\n        // Note that this is for STORING the location data, not fetching it. The\n        // latter is controlled by the `searchOptions` of <PlacesAutocomplete>\n        // component. So even if we want to fetch all the way down to postal\n        // code level, we still need to store the data at\n        // city/county/state/country levels. See additional in-code comments in\n        // related methods...\n        results[0].address_components.forEach((component: any) => {\n          const { types, long_name } = component;\n\n          // Docs for this mess\n          // developers.google.com/maps/documentation/geocoding/intro#Types\n          if (\n            types.includes('locality') ||\n            types.includes('neighborhood') ||\n            types.includes('colloquial_area') ||\n            types.includes('sublocality') ||\n            types.includes('sublocality_level_1') ||\n            types.includes('sublocality_level_2') ||\n            types.includes('sublocality_level_3') ||\n            types.includes('sublocality_level_4') ||\n            types.includes('sublocality_level_5')\n          ) {\n            addressComponents.city = long_name;\n          } else if (types.includes('administrative_area_level_1')) {\n            addressComponents.state = long_name;\n          } else if (types.includes('administrative_area_level_2')) {\n            addressComponents.county = long_name;\n          } else if (types.includes('country')) {\n            addressComponents.country = long_name;\n          }\n        });\n\n        dispatchForm({\n          type: 'SET_ADDRESS_COMPONENTS',\n          payload: addressComponents,\n        });\n\n        return results;\n      })\n      .then((results: any) => getLatLng(results[0]))\n      .then((latLng: Location) => {\n        dispatchForm({ type: 'SET_ADDRESS', payload: newAddress });\n        dispatchForm({ type: 'SET_LOCATION', payload: latLng });\n      })\n      .catch(alert); // better than console error for now\n  };\n\n  return (\n    <>\n      <DialogTitle className={classes.dialogTitle}>\n        Where were you when your symptoms began?\n      </DialogTitle>\n      <DialogContent dividers>\n        <PlacesAutocomplete\n          value={formState.address}\n          onChange={value =>\n            dispatchForm({\n              type: 'SET_ADDRESS',\n              payload: value,\n            })\n          }\n          onSelect={handleSelectAddress}\n          // https://developers.google.com/places/supported_types#table3\n          // `geocode` basically returns everything except businesses, so it\n          // must be filtered client-side. See related in-code comments for more\n          // details.\n          searchOptions={{ types: ['geocode'] }}\n          debounce={300}\n          shouldFetchSuggestions={\n            !!formState.address && formState.address.length > 2\n          }\n        >\n          {({\n            getInputProps,\n            suggestions,\n            getSuggestionItemProps,\n            loading,\n          }) => (\n            <>\n              <TextField\n                data-cy=\"location\"\n                {...getInputProps({\n                  helperText:\n                    'If you experienced no symptoms, use current city',\n                  placeholder: 'Enter your city ...',\n                  className: 'location-search-input',\n                })}\n              />\n              <div className=\"autocomplete-dropdown-container\">\n                {loading && <div>Loading...</div>}\n                {suggestions\n                  // Do not include overly broad or overly specific locations.\n                  // This exact set cannot be accomplished using `searchOptions`\n                  // in the Gmaps API, it must be filtered client-side. Note\n                  // that the administrative levels mean different things in\n                  // each country, but overall the below exclusions do what we\n                  // want.\n                  .filter(\n                    suggestion =>\n                      ![\n                        'administrative_area_level_1', // state\n                        'administrative_area_level_2', // county\n                        'country',\n                        'postal_code', // zip code or similar\n                        'premise', // address-ish\n                        'street_address', // address\n                        'subpremise', // address-ish\n                      ].includes(suggestion.types[0])\n                  )\n                  .map(suggestion => {\n                    const className = suggestion.active\n                      ? 'suggestion-item--active'\n                      : 'suggestion-item';\n\n                    // inline style for demonstration purpose\n                    const style = suggestion.active\n                      ? { backgroundColor: grey['600'], cursor: 'pointer' }\n                      : { backgroundColor: '#424242', cursor: 'pointer' };\n\n                    return (\n                      <div\n                        data-cy={`location-suggestion`}\n                        {...getSuggestionItemProps(suggestion, {\n                          className,\n                          style,\n                        })}\n                      >\n                        <span>{suggestion.description}</span>\n                      </div>\n                    );\n                  })}\n              </div>\n            </>\n          )}\n        </PlacesAutocomplete>\n      </DialogContent>\n    </>\n  );\n};\n","import React, { FC } from 'react';\nimport { DialogTitle, DialogContent } from '@material-ui/core';\nimport 'firebase/auth';\nimport { IfFirebaseAuthed, IfFirebaseUnAuthed } from '@react-firebase/auth';\n\nimport { SignupForm } from 'components/signup';\n\nexport const RegistrationStep: FC = () => {\n  return (\n    <>\n      <DialogTitle>Submit</DialogTitle>\n      <DialogContent dividers>\n        <IfFirebaseAuthed>\n          {({ user }) => (\n            <div className=\"simpler-font\" style={{ textAlign: 'center' }}>\n              <h4 style={{ fontWeight: 'normal' }}>\n                Almost there! Click the <b>SUBMIT</b> button below to upload\n                your case.\n              </h4>\n              <p\n                style={{ fontSize: '0.75rem', marginLeft: 20, marginRight: 20 }}\n              >\n                You are logged in as {user.email} and are ready to submit your\n                case. Just click <b>SUBMIT</b> and you are all set.\n              </p>\n            </div>\n          )}\n        </IfFirebaseAuthed>\n        <IfFirebaseUnAuthed>{() => <SignupForm />}</IfFirebaseUnAuthed>\n      </DialogContent>\n    </>\n  );\n};\n","import React, { useState, useContext, FC, useReducer } from 'react';\nimport { Link as RouteLink, useHistory } from 'react-router-dom';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {\n  Dialog,\n  DialogActions,\n  Button,\n  Stepper,\n  Step,\n  StepLabel,\n  CircularProgress,\n  useMediaQuery,\n} from '@material-ui/core';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { IfFirebaseUnAuthed } from '@react-firebase/auth';\n\nimport firebase from 'config/firebase';\nimport { postFormData } from 'utils/api';\nimport { signUp } from 'utils/firebase';\nimport { GlobalContext } from 'components';\nimport {\n  SymptomStep,\n  TestingStep,\n  LocationDetailsStep,\n  RegistrationStep,\n} from 'components/submission/steps';\nimport { UserContext } from 'context';\nimport {\n  formReducer,\n  emailSignupFormInitialState,\n  SignInLink,\n} from 'components/signup';\n\nconst getSteps = () => {\n  return ['Symptoms', 'Tests', 'Location', 'Submit'];\n};\n\nconst useStyles = makeStyles(theme => ({\n  // TODO: allow horizontal scrolling in stepper but not in the rest of modal\n  stepper: {\n    padding: `12px 4px ${theme.spacing(1)}px`,\n  },\n}));\n\ninterface ModalTypes {\n  setSuccessConfOpen: React.Dispatch<boolean>;\n}\n\nexport const Modal: FC<ModalTypes> = ({ setSuccessConfOpen }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const history = useHistory();\n  const [user] = useAuthState(firebase.auth());\n  const [activeStep, setActiveStep] = useState<number>(0);\n  const [submitting, setSubmitting] = useState<boolean>(false);\n  const {\n    state: symptomsFormState,\n    dispatch: dispatchSymptomsForm,\n  } = useContext(UserContext);\n  const { dispatch } = useContext(GlobalContext);\n  const [signupFormState, signupFormDispatch] = useReducer(\n    formReducer,\n    emailSignupFormInitialState\n  );\n  const steps = getSteps();\n  const smallAndUp = useMediaQuery(theme.breakpoints.up('sm')); // >= 600ish px\n\n  const handleNext = () => {\n    // Next button on registration acts as signup\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  // logic for handling when you can click next, depending on the step\n  const isNextDisabled = (step: number): boolean => {\n    switch (step) {\n      case 1:\n        // All the last steps of this form\n        if (\n          symptomsFormState.seenPhysician === false ||\n          symptomsFormState.testedPositive !== undefined ||\n          symptomsFormState.doctorDiagnosis !== undefined\n        ) {\n          return false;\n        }\n\n        return true;\n      case 2:\n        return !symptomsFormState.location;\n      case 3:\n        return !signupFormState.captcha;\n      default:\n        return false;\n    }\n  };\n\n  const submitSymptomsForm = async (firebaseUser: firebase.User | null) => {\n    if (firebaseUser) {\n      try {\n        const idToken = await firebaseUser.getIdToken(true);\n        setSubmitting(true);\n        await postFormData(symptomsFormState, idToken);\n        history.push('/');\n        setSuccessConfOpen(true);\n      } catch (err) {\n        dispatch({\n          type: 'TOGGLE_UI_ALERT',\n          payload: {\n            open: true,\n            message: 'Something went wrong. Your entry was not submitted.',\n            severity: 'error',\n          },\n        });\n        setSubmitting(false);\n      }\n    }\n  };\n\n  const handleSignupError = (code: string, message: string) => {\n    switch (code) {\n      case 'auth/email-already-in-use':\n        signupFormDispatch({\n          type: 'SET_FIELD',\n          payload: {\n            field: 'emailError',\n            value: 'That email is already in use',\n          },\n        });\n        break;\n      case 'auth/invalid-email':\n        signupFormDispatch({\n          type: 'SET_FIELD',\n          payload: {\n            field: 'emailError',\n            value: 'Invalid email',\n          },\n        });\n        break;\n      // I don't know why this is an error in the first place\n      case 'auth/cancelled-popup-request':\n        break;\n      default:\n        dispatch({\n          type: 'TOGGLE_UI_ALERT',\n          payload: {\n            open: true,\n            message,\n            severity: 'error',\n            duration: 15000, // it's not actually 15 seconds, more like 6 or 7\n          },\n        });\n        break;\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      if (user) {\n        await submitSymptomsForm(user);\n      }\n      // hasn't registered yet\n      else {\n        await signUp(\n          signupFormState.email,\n          signupFormState.password,\n          signupFormState.password2\n        );\n\n        setSubmitting(true);\n        const { currentUser } = firebase.auth();\n        await submitSymptomsForm(currentUser);\n      }\n    } catch (err) {\n      setSubmitting(false);\n      handleSignupError(err.code, err.message);\n    }\n  };\n\n  const isLastStep = () => {\n    return (\n      user &&\n      symptomsFormState.location &&\n      symptomsFormState.hasAgreedToTerms &&\n      activeStep === steps.length - 1\n    );\n  };\n\n  const canSubmit = () => {\n    if (user) {\n      return symptomsFormState.hasAgreedToTerms;\n    }\n    return symptomsFormState.hasAgreedToTerms && signupFormState.captcha;\n  };\n\n  const displayStep = (step: number) => {\n    switch (step) {\n      case 0:\n        return <SymptomStep setActiveStep={setActiveStep} />;\n      case 1:\n        return (\n          <TestingStep\n            formState={symptomsFormState}\n            dispatchForm={dispatchSymptomsForm}\n          />\n        );\n      case 2:\n        return <LocationDetailsStep />;\n      case 3:\n        return <RegistrationStep />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Dialog\n      open\n      aria-labelledby=\"form-dialog-title\"\n      fullWidth\n      fullScreen={!smallAndUp}\n    >\n      <Stepper activeStep={activeStep} className={classes.stepper}>\n        {steps.map(label => {\n          const stepProps: { completed?: boolean } = {};\n          const labelProps: { optional?: React.ReactNode } = {};\n          return (\n            <Step key={label} {...stepProps}>\n              <StepLabel {...labelProps}>{label}</StepLabel>\n            </Step>\n          );\n        })}\n      </Stepper>\n      {displayStep(activeStep)}\n      <DialogActions>\n        <IfFirebaseUnAuthed>\n          {() => (\n            <div>\n              Have an account? <SignInLink />\n            </div>\n          )}\n        </IfFirebaseUnAuthed>\n        <Button size=\"small\" to=\"/\" component={RouteLink} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          size=\"small\"\n          onClick={handleBack}\n          color=\"primary\"\n          disabled={activeStep === 0 || submitting}\n        >\n          Back\n        </Button>\n        {activeStep < steps.length - 1 && !isLastStep() ? (\n          <Button\n            size=\"small\"\n            data-cy=\"next-button\"\n            onClick={handleNext}\n            color=\"secondary\"\n            variant=\"contained\"\n            disabled={isNextDisabled(activeStep)}\n          >\n            Next\n          </Button>\n        ) : (\n          <Button\n            size=\"small\"\n            onClick={handleSubmit}\n            color=\"secondary\"\n            variant=\"contained\"\n            data-cy=\"submit-button\"\n            disabled={!canSubmit() || submitting}\n          >\n            {!submitting ? 'Submit' : <CircularProgress size={28} />}\n          </Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles';\nimport { withStyles } from '@material-ui/core';\nimport grey from '@material-ui/core/colors/grey';\n\n// Easy access to theme properties when used in `createMuiTheme` overrides\n// CRED: https://stackoverflow.com/a/57127040/1048518\nconst covidTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: grey,\n  },\n  typography: {\n    fontFamily: [\n      'Bebas Neue',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n    fontSize: 18,\n  },\n});\n\n// Dialogs with dividers are a separate class from those without\nconst dialogContentPadding = {\n  padding: `${covidTheme.spacing(3)}px ${covidTheme.spacing(2)}px`,\n  [covidTheme.breakpoints.up('sm')]: {\n    padding: covidTheme.spacing(3),\n  },\n};\n\n// Dialog title and actions look pretty good with similar spacing\nconst dialogHeadFootSpacing = {\n  padding: '8px 12px',\n  [covidTheme.breakpoints.up('sm')]: {\n    padding: '12px 16px',\n  },\n};\n\n// Global overrides of MUI components that need to be re-styled often\ncovidTheme.overrides = {\n  MuiInput: {\n    // Bebas is bad news for <input> since it lacks lowercase. Will also apply\n    // Roboto to textful pages like <About>.\n    root: { fontFamily: \"'Roboto', sans-serif\" },\n  },\n  MuiDialog: {\n    // Outside boundary of all dialogs\n    paper: {\n      margin: 12,\n    },\n    // e.g. splash screen\n    paperScrollPaper: {\n      maxHeight: 'calc(100% - 24px)',\n    },\n    paperFullWidth: {\n      maxHeight: 'calc(100% - 24px)',\n      width: 'calc(100% - 16px)',\n    },\n  },\n  MuiDialogTitle: {\n    root: dialogHeadFootSpacing,\n  },\n  MuiDialogActions: {\n    root: dialogHeadFootSpacing,\n  },\n  MuiDialogContent: {\n    root: {\n      ...dialogContentPadding,\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column',\n      minHeight: 225, // otherwise looks silly when there is not much content\n    },\n    dividers: {\n      ...dialogContentPadding,\n    },\n  },\n};\n\nexport const GlobalCss = withStyles({\n  // @global is handled by jss-plugin-global.\n  '@global': {\n    '.simpler-font': {\n      fontFamily: \"'Roboto', sans-serif\",\n    },\n    // Pushes it to left, but not if it's the only element in the actions\n    '.MuiDialogActions-root > *:first-child:not(:last-child)': {\n      marginRight: 'auto',\n    },\n    // Includes <a> elems styled as buttons (e.g. \"Cancel\")\n    '.MuiDialogActions-root > .MuiButtonBase-root': {\n      minWidth: 40, // override 60px default (too big for sm btns like \"Back\")\n    },\n    '.obvious-link': {\n      color: covidTheme.palette.info.main,\n      textDecoration: 'none',\n    },\n  },\n})(() => null);\n\nexport const theme = responsiveFontSizes(covidTheme);\n","import React, { FC, useState } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport 'firebase/auth';\nimport { FirebaseAuthProvider } from '@react-firebase/auth';\n\nimport {\n  Dashboard,\n  GlobalProvider,\n  CustomSnackbar,\n  SuccessConfModal,\n} from 'components';\nimport { UserProvider } from 'context';\nimport { Modal } from 'components/submission';\nimport {\n  Home,\n  About,\n  Models,\n  List,\n  TermsOfService,\n  PrivacyPolicy,\n  SecretSnackground,\n  LoginSignup,\n} from 'views';\nimport firebase from 'config/firebase';\nimport { theme, GlobalCss } from 'theme';\n\nconst Routes: FC = () => {\n  const [successConfOpen, setSuccessConfOpen] = useState<boolean>(false);\n\n  return (\n    // @ts-ignore\n    <FirebaseAuthProvider firebase={firebase}>\n      <GlobalProvider>\n        <UserProvider>\n          <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <GlobalCss />\n            <Router basename={process.env.REACT_APP_ROUTER_BASENAME || '/'}>\n              <Dashboard>\n                <Route path=\"/models\">\n                  <Models />\n                </Route>\n                <Route path=\"/about\">\n                  <About />\n                </Route>\n                <Route path=\"/privacy-policy\">\n                  <PrivacyPolicy />\n                </Route>\n                <Route path=\"/terms-of-service\">\n                  <TermsOfService />\n                </Route>\n                <Route path=\"/list\">\n                  <List />\n                </Route>\n                <Route path=\"/secret-snackground\">\n                  <SecretSnackground />\n                </Route>\n                <Route path=\"/\" exact>\n                  <Home />\n                </Route>\n                <SuccessConfModal\n                  open={successConfOpen}\n                  setOpen={setSuccessConfOpen}\n                />\n                <CustomSnackbar />\n              </Dashboard>\n              {/* None of the modals need to be inside Dashboard */}\n              <LoginSignup />\n              <Route path=\"/self-report\">\n                <Modal setSuccessConfOpen={setSuccessConfOpen} />\n              </Route>\n            </Router>\n          </ThemeProvider>\n        </UserProvider>\n      </GlobalProvider>\n    </FirebaseAuthProvider>\n  );\n};\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from 'Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}